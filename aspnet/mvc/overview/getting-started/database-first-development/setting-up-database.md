---
uid: mvc/overview/getting-started/database-first-development/setting-up-database
title: 'Esercitazione: Introduzione a Entity Framework Database First con MVC 5'
description: Questo articolo illustra come iniziare con un oggetto esistente del database e creare rapidamente un'applicazione web che consente agli utenti di interagire con i dati.
author: Rick-Anderson
ms.author: riande
ms.date: 01/23/2019
ms.topic: tutorial
ms.assetid: 095abad4-3bfe-4f06-b092-ae6a735b7e49
msc.legacyurl: /mvc/overview/getting-started/database-first-development/setting-up-database
msc.type: authoredcontent
ms.openlocfilehash: 8b094b7c334eaad510c46b55a99ec727b9c381c2
ms.sourcegitcommit: d5223cf6a2cf80b4f5dc54169b0e376d493d2d3a
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 01/24/2019
ms.locfileid: "54889925"
---
# <a name="tutorial-get-started-with-ef-database-first-using-mvc-5"></a><span data-ttu-id="e1129-103">Esercitazione: Introduzione a Entity Framework Database First con MVC 5</span><span class="sxs-lookup"><span data-stu-id="e1129-103">Tutorial: Get started with EF Database First using MVC 5</span></span>

<span data-ttu-id="e1129-104">Usa MVC, Entity Framework e lo Scaffolding di ASP.NET, è possibile creare un'applicazione web che fornisce un'interfaccia a un database esistente.</span><span class="sxs-lookup"><span data-stu-id="e1129-104">Using MVC, Entity Framework, and ASP.NET Scaffolding, you can create a web application that provides an interface to an existing database.</span></span> <span data-ttu-id="e1129-105">Questa serie di esercitazioni illustra come generare il codice che consente agli utenti di visualizzare, modificare, creare automaticamente ed eliminare dati che si trovano in una tabella di database.</span><span class="sxs-lookup"><span data-stu-id="e1129-105">This tutorial series shows you how to automatically generate code that enables users to display, edit, create, and delete data that resides in a database table.</span></span> <span data-ttu-id="e1129-106">Il codice generato corrispondente alle colonne nella tabella di database.</span><span class="sxs-lookup"><span data-stu-id="e1129-106">The generated code corresponds to the columns in the database table.</span></span> <span data-ttu-id="e1129-107">Nell'ultima parte della serie, si distribuirà il sito e il database di Azure.</span><span class="sxs-lookup"><span data-stu-id="e1129-107">In the last part of the series, you will deploy the site and database to Azure.</span></span>

<span data-ttu-id="e1129-108">Questo articolo illustra come iniziare con un oggetto esistente del database e creare rapidamente un'applicazione web che consente agli utenti di interagire con i dati.</span><span class="sxs-lookup"><span data-stu-id="e1129-108">This article shows how to start with an existing database and quickly create a web application that enables users to interact with the data.</span></span> <span data-ttu-id="e1129-109">Per compilare l'applicazione web Usa l'Entity Framework 6 e MVC 5.</span><span class="sxs-lookup"><span data-stu-id="e1129-109">It uses the Entity Framework 6 and MVC 5 to build the web application.</span></span> <span data-ttu-id="e1129-110">La funzionalità di Scaffolding di ASP.NET consente di generare automaticamente codice per la visualizzazione, l'aggiornamento, la creazione e l'eliminazione dei dati.</span><span class="sxs-lookup"><span data-stu-id="e1129-110">The ASP.NET Scaffolding feature enables you to automatically generate code for displaying, updating, creating and deleting data.</span></span> <span data-ttu-id="e1129-111">Usa gli strumenti di pubblicazione all'interno di Visual Studio, è possibile distribuire facilmente il sito e il database in Azure.</span><span class="sxs-lookup"><span data-stu-id="e1129-111">Using the publishing tools within Visual Studio, you can easily deploy the site and database to Azure.</span></span>

<span data-ttu-id="e1129-112">Questa parte della serie è incentrato sulla creazione di un database e popolarlo con i dati.</span><span class="sxs-lookup"><span data-stu-id="e1129-112">This part of the series focuses on creating a database and populating it with data.</span></span>

<span data-ttu-id="e1129-113">Questa serie è stato scritto con contributi Tom Dykstra e Rick Anderson.</span><span class="sxs-lookup"><span data-stu-id="e1129-113">This series was written with contributions from Tom Dykstra and Rick Anderson.</span></span> <span data-ttu-id="e1129-114">È stato migliorato in base al feedback degli utenti nella sezione dei commenti.</span><span class="sxs-lookup"><span data-stu-id="e1129-114">It was improved based on feedback from users in the comments section.</span></span>

<span data-ttu-id="e1129-115">Le attività di questa esercitazione sono le seguenti:</span><span class="sxs-lookup"><span data-stu-id="e1129-115">In this tutorial, you:</span></span>

> [!div class="checklist"]
> * <span data-ttu-id="e1129-116">Configurare il database</span><span class="sxs-lookup"><span data-stu-id="e1129-116">Set up the database</span></span>

## <a name="prerequisites"></a><span data-ttu-id="e1129-117">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="e1129-117">Prerequisites</span></span>

* [<span data-ttu-id="e1129-118">Visual Studio 2017</span><span class="sxs-lookup"><span data-stu-id="e1129-118">Visual Studio 2017</span></span>](https://visualstudio.microsoft.com/downloads/?utm_medium=microsoft&utm_source=docs.microsoft.com&utm_campaign=button+cta&utm_content=download+vs2017)

## <a name="introduction"></a><span data-ttu-id="e1129-119">Introduzione</span><span class="sxs-lookup"><span data-stu-id="e1129-119">Introduction</span></span>

<span data-ttu-id="e1129-120">Questo articolo illustra la situazione in cui si dispone di un database e si desidera generare il codice per un'applicazione web in base ai campi di tale database.</span><span class="sxs-lookup"><span data-stu-id="e1129-120">This article addresses the situation where you have a database and want to generate code for a web application based on the fields of that database.</span></span> <span data-ttu-id="e1129-121">Questo approccio è definito lo sviluppo di Database First.</span><span class="sxs-lookup"><span data-stu-id="e1129-121">This approach is called Database First development.</span></span> <span data-ttu-id="e1129-122">Se si dispone già di un database esistente, è possibile usare invece un approccio definito lo sviluppo Code First che prevede la definizione delle classi di dati e generazione del database dalle proprietà della classe.</span><span class="sxs-lookup"><span data-stu-id="e1129-122">If you do not already have an existing database, you can instead use an approach called Code First development which involves defining data classes and generating the database from the class properties.</span></span>

## <a name="set-up-the-database"></a><span data-ttu-id="e1129-123">Configurare il database</span><span class="sxs-lookup"><span data-stu-id="e1129-123">Set up the database</span></span>

<span data-ttu-id="e1129-124">Per simulare l'ambiente di disporre di un database esistente, è prima di tutto creare un database con alcuni dati pre-popolata e quindi creare l'applicazione web che si connette al database.</span><span class="sxs-lookup"><span data-stu-id="e1129-124">To mimic the environment of having an existing database, you will first create a database with some pre-filled data, and then create your web application that connects to the database.</span></span>

<span data-ttu-id="e1129-125">Questa esercitazione è stata sviluppata utilizzando LocalDB.</span><span class="sxs-lookup"><span data-stu-id="e1129-125">This tutorial was developed using LocalDB.</span></span> <span data-ttu-id="e1129-126">È possibile usare un server di database esistente anziché LocalDB, ma a seconda della versione di Visual Studio e il tipo di database, tutti gli strumenti dati in Visual Studio potrebbe non essere supportati.</span><span class="sxs-lookup"><span data-stu-id="e1129-126">You can use an existing database server instead of LocalDB, but depending on your version of Visual Studio and your type of database, all of the data tools in Visual Studio might not be supported.</span></span> <span data-ttu-id="e1129-127">Se gli strumenti non sono disponibili per il database, si potrebbe essere necessario eseguire alcuni passaggi specifici del database all'interno della suite di gestione per il database.</span><span class="sxs-lookup"><span data-stu-id="e1129-127">If the tools are not available for your database, you may need to perform some of the database-specific steps within the management suite for your database.</span></span>

<span data-ttu-id="e1129-128">Se si dispone di un problema con gli strumenti di database nella versione di Visual Studio, assicurarsi che sia installata la versione più recente degli strumenti di database.</span><span class="sxs-lookup"><span data-stu-id="e1129-128">If you have a problem with the database tools in your version of Visual Studio, make sure you have installed the latest version of the database tools.</span></span> <span data-ttu-id="e1129-129">Per informazioni sull'aggiornamento o installazione degli strumenti di database, vedere [Microsoft SQL Server Data Tools](https://msdn.microsoft.com/data/hh297027).</span><span class="sxs-lookup"><span data-stu-id="e1129-129">For information about updating or installing the database tools, see [Microsoft SQL Server Data Tools](https://msdn.microsoft.com/data/hh297027).</span></span>

<span data-ttu-id="e1129-130">Avviare Visual Studio e creare un **progetto di Database di SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="e1129-130">Launch Visual Studio and create a **SQL Server Database Project**.</span></span> <span data-ttu-id="e1129-131">Denominare il progetto **ContosoUniversityData**.</span><span class="sxs-lookup"><span data-stu-id="e1129-131">Name the project **ContosoUniversityData**.</span></span>

![creare il progetto di database](setting-up-database/_static/image1.png)

<span data-ttu-id="e1129-133">È ora disponibile un progetto di database vuoto.</span><span class="sxs-lookup"><span data-stu-id="e1129-133">You now have an empty database project.</span></span> <span data-ttu-id="e1129-134">Si distribuirà questo database di Azure più avanti in questa esercitazione, quindi è necessario impostare il Database SQL di Azure come piattaforma di destinazione per il progetto.</span><span class="sxs-lookup"><span data-stu-id="e1129-134">You will deploy this database to Azure later in this tutorial, so you'll need to set Azure SQL Database as the target platform for the project.</span></span> <span data-ttu-id="e1129-135">Impostare la piattaforma di destinazione non distribuisce effettivamente il database. Ciò significa semplicemente che il progetto di database verrà verificato che la progettazione del database è compatibile con la piattaforma di destinazione.</span><span class="sxs-lookup"><span data-stu-id="e1129-135">Setting the target platform does not actually deploy the database; it only means that the database project will verify that the database design is compatible with the target platform.</span></span> <span data-ttu-id="e1129-136">Per impostare la piattaforma di destinazione, aprire il **delle proprietà** per il progetto e selezionare **Database SQL di Microsoft Azure** per la piattaforma di destinazione.</span><span class="sxs-lookup"><span data-stu-id="e1129-136">To set the target platform, open the **Properties** for the project and select **Microsoft Azure SQL Database** for the target platform.</span></span>

<span data-ttu-id="e1129-137">È possibile creare le tabelle necessarie per questa esercitazione aggiungendo gli script SQL che definiscono le tabelle.</span><span class="sxs-lookup"><span data-stu-id="e1129-137">You can create the tables needed for this tutorial by adding SQL scripts that define the tables.</span></span> <span data-ttu-id="e1129-138">Mouse sul progetto e aggiungere un nuovo elemento.</span><span class="sxs-lookup"><span data-stu-id="e1129-138">Right-click your project and add a new item.</span></span> <span data-ttu-id="e1129-139">Selezionare **tabelle e viste** > **tabella** e denominarlo *studente*.</span><span class="sxs-lookup"><span data-stu-id="e1129-139">Select **Tables and Views** > **Table** and name it *Student*.</span></span>

<span data-ttu-id="e1129-140">Nel file della tabella, sostituire il comando T-SQL con il codice seguente per creare la tabella.</span><span class="sxs-lookup"><span data-stu-id="e1129-140">In the table file, replace the T-SQL command with the following code to create the table.</span></span>

[!code-sql[Main](setting-up-database/samples/sample1.sql)]

<span data-ttu-id="e1129-141">Si noti che la finestra di progettazione si sincronizza automaticamente con il codice.</span><span class="sxs-lookup"><span data-stu-id="e1129-141">Notice that the design window automatically synchronizes with the code.</span></span> <span data-ttu-id="e1129-142">È possibile lavorare con il codice o la finestra di progettazione.</span><span class="sxs-lookup"><span data-stu-id="e1129-142">You can work with either the code or designer.</span></span>

![Mostra codice e progettazione](setting-up-database/_static/image5.png)

<span data-ttu-id="e1129-144">Aggiungere un'altra tabella.</span><span class="sxs-lookup"><span data-stu-id="e1129-144">Add another table.</span></span> <span data-ttu-id="e1129-145">Questa volta denominarlo Course e usare il comando T-SQL seguente.</span><span class="sxs-lookup"><span data-stu-id="e1129-145">This time name it Course and use the following T-SQL command.</span></span>

[!code-sql[Main](setting-up-database/samples/sample2.sql)]

<span data-ttu-id="e1129-146">E, ancora una volta per creare una tabella denominata registrazione ripetere.</span><span class="sxs-lookup"><span data-stu-id="e1129-146">And, repeat one more time to create a table named Enrollment.</span></span>

[!code-sql[Main](setting-up-database/samples/sample3.sql)]

<span data-ttu-id="e1129-147">È possibile popolare il database con i dati tramite uno script che viene eseguito dopo che il database viene distribuito.</span><span class="sxs-lookup"><span data-stu-id="e1129-147">You can populate your database with data through a script that is run after the database is deployed.</span></span> <span data-ttu-id="e1129-148">Aggiungere uno Script di post-distribuzione per il progetto.</span><span class="sxs-lookup"><span data-stu-id="e1129-148">Add a Post-Deployment Script to the project.</span></span> <span data-ttu-id="e1129-149">Mouse sul progetto e aggiungere un nuovo elemento.</span><span class="sxs-lookup"><span data-stu-id="e1129-149">Right-click your project and add a new item.</span></span> <span data-ttu-id="e1129-150">Selezionare **script utente** > **Script post-distribuzione**.</span><span class="sxs-lookup"><span data-stu-id="e1129-150">Select **User Scripts** > **Post-Deployment Script**.</span></span> <span data-ttu-id="e1129-151">È possibile usare il nome predefinito.</span><span class="sxs-lookup"><span data-stu-id="e1129-151">You can use the default name.</span></span>

<span data-ttu-id="e1129-152">Aggiungere il codice T-SQL seguente allo script di post-distribuzione.</span><span class="sxs-lookup"><span data-stu-id="e1129-152">Add the following T-SQL code to the post-deployment script.</span></span> <span data-ttu-id="e1129-153">Questo script aggiunge semplicemente i dati al database quando non viene trovato alcun record corrispondente.</span><span class="sxs-lookup"><span data-stu-id="e1129-153">This script simply adds data to the database when no matching record is found.</span></span> <span data-ttu-id="e1129-154">Non sovrascrivere o eliminare i dati che immessi nel database.</span><span class="sxs-lookup"><span data-stu-id="e1129-154">It does not overwrite or delete any data you may have entered into the database.</span></span>

[!code-sql[Main](setting-up-database/samples/sample4.sql)]

<span data-ttu-id="e1129-155">È importante notare che lo script di post-distribuzione viene eseguito ogni volta che si distribuisce il progetto di database.</span><span class="sxs-lookup"><span data-stu-id="e1129-155">It is important to note that the post-deployment script is run every time you deploy your database project.</span></span> <span data-ttu-id="e1129-156">Pertanto, è necessario considerare attentamente i requisiti durante la scrittura di questo script.</span><span class="sxs-lookup"><span data-stu-id="e1129-156">Therefore, you need to carefully consider your requirements when writing this script.</span></span> <span data-ttu-id="e1129-157">In alcuni casi, si desidera iniziare da capo da un set di dati noto ogni volta che viene distribuito il progetto.</span><span class="sxs-lookup"><span data-stu-id="e1129-157">In some cases, you may wish to start over from a known set of data every time the project is deployed.</span></span> <span data-ttu-id="e1129-158">In altri casi, è possibile non modificare i dati esistenti in alcun modo.</span><span class="sxs-lookup"><span data-stu-id="e1129-158">In other cases, you may not want to alter the existing data in any way.</span></span> <span data-ttu-id="e1129-159">In base alle esigenze, è possibile decidere se è necessario uno script di post-distribuzione o quello che devi includere nello script.</span><span class="sxs-lookup"><span data-stu-id="e1129-159">Based on your requirements, you can decide whether you need a post-deployment script or what you need to include in the script.</span></span> <span data-ttu-id="e1129-160">Per altre informazioni sul popolamento del database con uno script di post-distribuzione, vedere [tra cui i dati in un progetto di Database di SQL Server](https://blogs.msdn.com/b/ssdt/archive/2012/02/02/including-data-in-an-sql-server-database-project.aspx).</span><span class="sxs-lookup"><span data-stu-id="e1129-160">For more information about populating your database with a post-deployment script, see [Including Data in a SQL Server Database Project](https://blogs.msdn.com/b/ssdt/archive/2012/02/02/including-data-in-an-sql-server-database-project.aspx).</span></span>

<span data-ttu-id="e1129-161">È ora possibile 4 file script SQL, ma non le tabelle effettive.</span><span class="sxs-lookup"><span data-stu-id="e1129-161">You now have 4 SQL script files but no actual tables.</span></span> <span data-ttu-id="e1129-162">Si è pronti per distribuire il progetto di database in localdb.</span><span class="sxs-lookup"><span data-stu-id="e1129-162">You are ready to deploy your database project to localdb.</span></span> <span data-ttu-id="e1129-163">In Visual Studio, fare clic sul pulsante Start (o F5) per compilare e distribuire il progetto di database.</span><span class="sxs-lookup"><span data-stu-id="e1129-163">In Visual Studio, click the Start button (or F5) to build and deploy your database project.</span></span> <span data-ttu-id="e1129-164">Verificare i **Output** pressione di tab per verificare che la compilazione e la distribuzione ha avuto esito positivo.</span><span class="sxs-lookup"><span data-stu-id="e1129-164">Check the **Output** tab to verify that the build and deployment succeeded.</span></span>

<span data-ttu-id="e1129-165">Per verificare che il nuovo database è stato creato, aprire **Esplora oggetti di SQL Server** e cercare il nome del progetto nel server di database locale corretto (in questo caso **\ProjectsV13 (localdb)**).</span><span class="sxs-lookup"><span data-stu-id="e1129-165">To see that the new database has been created, open **SQL Server Object Explorer** and look for the name of the project in the correct local database server (in this case **(localdb)\ProjectsV13**).</span></span>

<span data-ttu-id="e1129-166">Per verificare che le tabelle vengono popolate con i dati, fare doppio clic su una tabella e selezionare **dati della visualizzazione**.</span><span class="sxs-lookup"><span data-stu-id="e1129-166">To see that the tables are populated with data, right-click a table, and select **View Data**.</span></span>

![Mostra dati tabella](setting-up-database/_static/image9.png)

<span data-ttu-id="e1129-168">Viene mostrata una visualizzazione modificabile dei dati della tabella.</span><span class="sxs-lookup"><span data-stu-id="e1129-168">An editable view of the table data is displayed.</span></span> <span data-ttu-id="e1129-169">Ad esempio, se si seleziona **tabelle** > **dbo.course** > **Visualizza dati**, verrà visualizzata una tabella con tre colonne (**corso**, **Title**, e **crediti**) e quattro righe.</span><span class="sxs-lookup"><span data-stu-id="e1129-169">For example, if you select **Tables** > **dbo.course** > **View Data**, you see a table with three columns (**Course**, **Title**, and **Credits**) and four rows.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="e1129-170">Risorse aggiuntive</span><span class="sxs-lookup"><span data-stu-id="e1129-170">Additional resources</span></span>

<span data-ttu-id="e1129-171">Per un esempio introduttivo di sviluppo con Code First, vedere [Introduzione a ASP.NET MVC 5](../introduction/getting-started.md).</span><span class="sxs-lookup"><span data-stu-id="e1129-171">For an introductory example of Code First development, see [Getting Started with ASP.NET MVC 5](../introduction/getting-started.md).</span></span> <span data-ttu-id="e1129-172">Per un esempio più avanzato, vedere [creazione di un modello di dati di Entity Framework per un'App ASP.NET MVC 4](../getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application.md).</span><span class="sxs-lookup"><span data-stu-id="e1129-172">For a more advanced example, see [Creating an Entity Framework Data Model for an ASP.NET MVC 4 App](../getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application.md).</span></span>

<span data-ttu-id="e1129-173">Per indicazioni sulla selezione l'approccio Entity Framework da utilizzare, vedere [approcci di sviluppo di Entity Framework](https://msdn.microsoft.com/library/ms178359.aspx#dbfmfcf).</span><span class="sxs-lookup"><span data-stu-id="e1129-173">For guidance on selecting which Entity Framework approach to use, see [Entity Framework Development Approaches](https://msdn.microsoft.com/library/ms178359.aspx#dbfmfcf).</span></span>

## <a name="next-steps"></a><span data-ttu-id="e1129-174">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="e1129-174">Next steps</span></span>

<span data-ttu-id="e1129-175">Le attività di questa esercitazione sono le seguenti:</span><span class="sxs-lookup"><span data-stu-id="e1129-175">In this tutorial, you:</span></span>

> [!div class="checklist"]
> * <span data-ttu-id="e1129-176">Configurare il database</span><span class="sxs-lookup"><span data-stu-id="e1129-176">Set up the database</span></span>

<span data-ttu-id="e1129-177">Passare all'articolo successivo per informazioni su come creare modelli di dati e applicazioni web.</span><span class="sxs-lookup"><span data-stu-id="e1129-177">Advance to the next article to learn how to create the web application and data models.</span></span>
> [!div class="nextstepaction"]
> [<span data-ttu-id="e1129-178">Creare modelli di dati e applicazioni web</span><span class="sxs-lookup"><span data-stu-id="e1129-178">Create the web application and data models</span></span>](creating-the-web-application.md)