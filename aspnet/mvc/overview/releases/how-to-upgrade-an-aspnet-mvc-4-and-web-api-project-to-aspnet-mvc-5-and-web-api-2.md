---
uid: mvc/overview/releases/how-to-upgrade-an-aspnet-mvc-4-and-web-api-project-to-aspnet-mvc-5-and-web-api-2
title: Come aggiornare un ASP.NET MVC 4 e Web del progetto API ASP.NET MVC 5 e API Web 2 | Microsoft Docs
author: Rick-Anderson
description: ASP.NET MVC 5 e API Web 2 offrono una serie di nuove funzionalità, tra cui routing con attributi filtri di autenticazione e molto altro ancora.
ms.author: riande
ms.date: 10/17/2013
ms.assetid: db0d02d9-58e8-4a0b-8d7d-b8df8ea97b88
msc.legacyurl: /mvc/overview/releases/how-to-upgrade-an-aspnet-mvc-4-and-web-api-project-to-aspnet-mvc-5-and-web-api-2
msc.type: authoredcontent
ms.openlocfilehash: 2566e201e44ccd9642abda7c7996056c73178fd6
ms.sourcegitcommit: a4dcca4f1cb81227c5ed3c92dc0e28be6e99447b
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/10/2018
ms.locfileid: "48912852"
---
<a name="how-to-upgrade-an-aspnet-mvc-4-and-web-api-project-to-aspnet-mvc-5-and-web-api-2"></a><span data-ttu-id="48bfc-103">Come aggiornare un ASP.NET MVC 4 e un progetto API Web ASP.NET MVC 5 e API Web 2</span><span class="sxs-lookup"><span data-stu-id="48bfc-103">How to Upgrade an ASP.NET MVC 4 and Web API Project to ASP.NET MVC 5 and Web API 2</span></span>
====================
<span data-ttu-id="48bfc-104">da [Rick Anderson]((https://twitter.com/RickAndMSFT))</span><span class="sxs-lookup"><span data-stu-id="48bfc-104">by [Rick Anderson]((https://twitter.com/RickAndMSFT))</span></span>

> <span data-ttu-id="48bfc-105">ASP.NET MVC 5 e API Web 2 offrono una serie di nuove funzionalità, tra cui routing con attributi filtri di autenticazione e molto altro ancora.</span><span class="sxs-lookup"><span data-stu-id="48bfc-105">ASP.NET MVC 5 and Web API 2 bring a host of new features, including attribute routing, authentication filters, and much more.</span></span> <span data-ttu-id="48bfc-106">Visualizzare [ https://www.asp.net/vnext ](https://www.asp.net/core) per altri dettagli.</span><span class="sxs-lookup"><span data-stu-id="48bfc-106">See [https://www.asp.net/vnext](https://www.asp.net/core) for more details.</span></span>
> 
> <span data-ttu-id="48bfc-107">Questa procedura dettagliata guiderà l'utente con i passaggi necessari per aggiornare l'applicazione per la versione più recente.</span><span class="sxs-lookup"><span data-stu-id="48bfc-107">This walkthrough will guide you with the steps required to upgrade your application to the latest version.</span></span>  
> 
> > [!NOTE]
> > <span data-ttu-id="48bfc-108">Vedi [ASP.NET and Web Tools per Visual Studio 2013 Release Notes](../../../visual-studio/overview/2013/release-notes.md) per informazioni sulle modifiche di rilievo rispetto MVC 4 e API Web alla versione successiva.</span><span class="sxs-lookup"><span data-stu-id="48bfc-108">Please see [ASP.NET and Web Tools for Visual Studio 2013 Release Notes](../../../visual-studio/overview/2013/release-notes.md) for information on breaking changes from MVC 4 and Web API to the next version.</span></span>
> 
>   
> 
> <span data-ttu-id="48bfc-109">Questo articolo è stato scritto da Youngjune Hong e Rick Anderson ( [ @RickAndMSFT ](https://twitter.com/#!/RickAndMSFT) )</span><span class="sxs-lookup"><span data-stu-id="48bfc-109">This article was written by Youngjune Hong and Rick Anderson ( [@RickAndMSFT](https://twitter.com/#!/RickAndMSFT) )</span></span>


## <a name="upgrade-steps"></a><span data-ttu-id="48bfc-110">Passaggi di aggiornamento</span><span class="sxs-lookup"><span data-stu-id="48bfc-110">Upgrade Steps</span></span>

1. <span data-ttu-id="48bfc-111">Eseguire il backup del progetto.</span><span class="sxs-lookup"><span data-stu-id="48bfc-111">Backup your project.</span></span> <span data-ttu-id="48bfc-112">Questa procedura dettagliata è necessario apportare modifiche al file di progetto, configurazione del pacchetto e i file Web. config.</span><span class="sxs-lookup"><span data-stu-id="48bfc-112">This walkthrough will require you to make changes to your project file, package configuration, and web.config files.</span></span>
2. <span data-ttu-id="48bfc-113">Per l'aggiornamento dall'API Web a Web API 2, in Global. asax, modificare:</span><span class="sxs-lookup"><span data-stu-id="48bfc-113">For upgrading from Web API to Web API 2, in global.asax, change:</span></span>

    [!code-csharp[Main](how-to-upgrade-an-aspnet-mvc-4-and-web-api-project-to-aspnet-mvc-5-and-web-api-2/samples/sample1.cs)]

   <span data-ttu-id="48bfc-114">in</span><span class="sxs-lookup"><span data-stu-id="48bfc-114">to</span></span>

    [!code-csharp[Main](how-to-upgrade-an-aspnet-mvc-4-and-web-api-project-to-aspnet-mvc-5-and-web-api-2/samples/sample2.cs)]
3. <span data-ttu-id="48bfc-115">Assicurarsi che tutti i pacchetti che usano i progetti siano compatibili con MVC 5 e API Web 2.</span><span class="sxs-lookup"><span data-stu-id="48bfc-115">Make sure all the packages that your projects use are compatible with MVC 5 and Web API 2.</span></span> <span data-ttu-id="48bfc-116">La seguente tabella vengono mostrate le MVC 4 e API Web correlati i pacchetti che devono essere modificati.</span><span class="sxs-lookup"><span data-stu-id="48bfc-116">The following table shows the MVC 4 and Web API related packages than need to be changed.</span></span> <span data-ttu-id="48bfc-117">Se si dispone di un pacchetto che dipende da uno dei pacchetti elencati di seguito, contattare il server di pubblicazione per ottenere le versioni più recenti che sono compatibili con MVC 5 e API Web 2.</span><span class="sxs-lookup"><span data-stu-id="48bfc-117">If you have a package that is dependent on one of the packages listed below, please contact the publishers to get the newer versions that are compatible with MVC 5 and Web API 2.</span></span> <span data-ttu-id="48bfc-118">Se hai il codice sorgente per tali pacchetti, è necessario ricompilarla con i nuovi assembly di Web API 2 e MVC 5.</span><span class="sxs-lookup"><span data-stu-id="48bfc-118">If you have the source code for those packages, you should recompile them with the new assemblies of MVC 5 and Web API 2.</span></span>   

    | <span data-ttu-id="48bfc-119">**Id del pacchetto**</span><span class="sxs-lookup"><span data-stu-id="48bfc-119">**Package Id**</span></span> | <span data-ttu-id="48bfc-120">**Versione precedente**</span><span class="sxs-lookup"><span data-stu-id="48bfc-120">**Old version**</span></span> | <span data-ttu-id="48bfc-121">**Nuova versione**</span><span class="sxs-lookup"><span data-stu-id="48bfc-121">**New version**</span></span> |
    | --- | --- | --- |
    | <span data-ttu-id="48bfc-122">Microsoft.AspNet.Razor</span><span class="sxs-lookup"><span data-stu-id="48bfc-122">Microsoft.AspNet.Razor</span></span> | <span data-ttu-id="48bfc-123">2.0.x.x</span><span class="sxs-lookup"><span data-stu-id="48bfc-123">2.0.x.x</span></span> | <span data-ttu-id="48bfc-124">3.0.0</span><span class="sxs-lookup"><span data-stu-id="48bfc-124">3.0.0</span></span> |
    | <span data-ttu-id="48bfc-125">Microsoft.AspNet.WebPages</span><span class="sxs-lookup"><span data-stu-id="48bfc-125">Microsoft.AspNet.WebPages</span></span> | <span data-ttu-id="48bfc-126">2.0.x.x</span><span class="sxs-lookup"><span data-stu-id="48bfc-126">2.0.x.x</span></span> | <span data-ttu-id="48bfc-127">3.0.0</span><span class="sxs-lookup"><span data-stu-id="48bfc-127">3.0.0</span></span> |
    | <span data-ttu-id="48bfc-128">Microsoft.AspNet.WebPages.WebData</span><span class="sxs-lookup"><span data-stu-id="48bfc-128">Microsoft.AspNet.WebPages.WebData</span></span> | <span data-ttu-id="48bfc-129">2.0.x.x</span><span class="sxs-lookup"><span data-stu-id="48bfc-129">2.0.x.x</span></span> | <span data-ttu-id="48bfc-130">3.0.0</span><span class="sxs-lookup"><span data-stu-id="48bfc-130">3.0.0</span></span> |
    | <span data-ttu-id="48bfc-131">Microsoft.AspNet.WebPages.OAuth</span><span class="sxs-lookup"><span data-stu-id="48bfc-131">Microsoft.AspNet.WebPages.OAuth</span></span> | <span data-ttu-id="48bfc-132">2.0.x.x</span><span class="sxs-lookup"><span data-stu-id="48bfc-132">2.0.x.x</span></span> | <span data-ttu-id="48bfc-133">3.0.0</span><span class="sxs-lookup"><span data-stu-id="48bfc-133">3.0.0</span></span> |
    | <span data-ttu-id="48bfc-134">Microsoft.AspNet.Mvc</span><span class="sxs-lookup"><span data-stu-id="48bfc-134">Microsoft.AspNet.Mvc</span></span> | <span data-ttu-id="48bfc-135">4.0.x.x</span><span class="sxs-lookup"><span data-stu-id="48bfc-135">4.0.x.x</span></span> | <span data-ttu-id="48bfc-136">5.0.0</span><span class="sxs-lookup"><span data-stu-id="48bfc-136">5.0.0</span></span> |
    | <span data-ttu-id="48bfc-137">Microsoft.AspNet.Mvc.Facebook</span><span class="sxs-lookup"><span data-stu-id="48bfc-137">Microsoft.AspNet.Mvc.Facebook</span></span> | <span data-ttu-id="48bfc-138">4.0.x.x</span><span class="sxs-lookup"><span data-stu-id="48bfc-138">4.0.x.x</span></span> | <span data-ttu-id="48bfc-139">5.0.0</span><span class="sxs-lookup"><span data-stu-id="48bfc-139">5.0.0</span></span> |
    | <span data-ttu-id="48bfc-140">Microsoft.AspNet.WebApi.Core</span><span class="sxs-lookup"><span data-stu-id="48bfc-140">Microsoft.AspNet.WebApi.Core</span></span> | <span data-ttu-id="48bfc-141">4.0.x.x</span><span class="sxs-lookup"><span data-stu-id="48bfc-141">4.0.x.x</span></span> | <span data-ttu-id="48bfc-142">5.0.0</span><span class="sxs-lookup"><span data-stu-id="48bfc-142">5.0.0</span></span> |
    | <span data-ttu-id="48bfc-143">Microsoft.AspNet.WebApi.SelfHost</span><span class="sxs-lookup"><span data-stu-id="48bfc-143">Microsoft.AspNet.WebApi.SelfHost</span></span> | <span data-ttu-id="48bfc-144">4.0.x.x</span><span class="sxs-lookup"><span data-stu-id="48bfc-144">4.0.x.x</span></span> | <span data-ttu-id="48bfc-145">5.0.0</span><span class="sxs-lookup"><span data-stu-id="48bfc-145">5.0.0</span></span> |
    | <span data-ttu-id="48bfc-146">Microsoft.AspNet.WebApi.Client</span><span class="sxs-lookup"><span data-stu-id="48bfc-146">Microsoft.AspNet.WebApi.Client</span></span> | <span data-ttu-id="48bfc-147">4.0.x.x</span><span class="sxs-lookup"><span data-stu-id="48bfc-147">4.0.x.x</span></span> | <span data-ttu-id="48bfc-148">5.0.0</span><span class="sxs-lookup"><span data-stu-id="48bfc-148">5.0.0</span></span> |
    | <span data-ttu-id="48bfc-149">Microsoft.AspNet.WebApi.OData</span><span class="sxs-lookup"><span data-stu-id="48bfc-149">Microsoft.AspNet.WebApi.OData</span></span> | <span data-ttu-id="48bfc-150">4.0.x.x</span><span class="sxs-lookup"><span data-stu-id="48bfc-150">4.0.x.x</span></span> | <span data-ttu-id="48bfc-151">5.0.0</span><span class="sxs-lookup"><span data-stu-id="48bfc-151">5.0.0</span></span> |
    | <span data-ttu-id="48bfc-152">Microsoft.AspNet.WebApi</span><span class="sxs-lookup"><span data-stu-id="48bfc-152">Microsoft.AspNet.WebApi</span></span> | <span data-ttu-id="48bfc-153">4.0.x.x</span><span class="sxs-lookup"><span data-stu-id="48bfc-153">4.0.x.x</span></span> | <span data-ttu-id="48bfc-154">5.0.0</span><span class="sxs-lookup"><span data-stu-id="48bfc-154">5.0.0</span></span> |
    | <span data-ttu-id="48bfc-155">Microsoft.AspNet.WebApi.WebHost</span><span class="sxs-lookup"><span data-stu-id="48bfc-155">Microsoft.AspNet.WebApi.WebHost</span></span> | <span data-ttu-id="48bfc-156">4.0.x.x</span><span class="sxs-lookup"><span data-stu-id="48bfc-156">4.0.x.x</span></span> | <span data-ttu-id="48bfc-157">5.0.0</span><span class="sxs-lookup"><span data-stu-id="48bfc-157">5.0.0</span></span> |
    | <span data-ttu-id="48bfc-158">Microsoft.AspNet.WebApi.Tracing</span><span class="sxs-lookup"><span data-stu-id="48bfc-158">Microsoft.AspNet.WebApi.Tracing</span></span> | <span data-ttu-id="48bfc-159">4.0.x.x</span><span class="sxs-lookup"><span data-stu-id="48bfc-159">4.0.x.x</span></span> | <span data-ttu-id="48bfc-160">5.0.0</span><span class="sxs-lookup"><span data-stu-id="48bfc-160">5.0.0</span></span> |
    | <span data-ttu-id="48bfc-161">Microsoft.AspNet.WebApi.HelpPage</span><span class="sxs-lookup"><span data-stu-id="48bfc-161">Microsoft.AspNet.WebApi.HelpPage</span></span> | <span data-ttu-id="48bfc-162">4.0.x.x</span><span class="sxs-lookup"><span data-stu-id="48bfc-162">4.0.x.x</span></span> | <span data-ttu-id="48bfc-163">5.0.0</span><span class="sxs-lookup"><span data-stu-id="48bfc-163">5.0.0</span></span> |
    | <span data-ttu-id="48bfc-164">Microsoft.Net.Http</span><span class="sxs-lookup"><span data-stu-id="48bfc-164">Microsoft.Net.Http</span></span> | <span data-ttu-id="48bfc-165">2.0.x.</span><span class="sxs-lookup"><span data-stu-id="48bfc-165">2.0.x.</span></span> | <span data-ttu-id="48bfc-166">2.2.x.</span><span class="sxs-lookup"><span data-stu-id="48bfc-166">2.2.x.</span></span> |
    | <span data-ttu-id="48bfc-167">Microsoft.Data.OData</span><span class="sxs-lookup"><span data-stu-id="48bfc-167">Microsoft.Data.OData</span></span> | <span data-ttu-id="48bfc-168">5.2.x</span><span class="sxs-lookup"><span data-stu-id="48bfc-168">5.2.x</span></span> | <span data-ttu-id="48bfc-169">5.6.x</span><span class="sxs-lookup"><span data-stu-id="48bfc-169">5.6.x</span></span> |
    | <span data-ttu-id="48bfc-170">System. Spatial</span><span class="sxs-lookup"><span data-stu-id="48bfc-170">System.Spatial</span></span> | <span data-ttu-id="48bfc-171">5.2.x</span><span class="sxs-lookup"><span data-stu-id="48bfc-171">5.2.x</span></span> | <span data-ttu-id="48bfc-172">5.6.x</span><span class="sxs-lookup"><span data-stu-id="48bfc-172">5.6.x</span></span> |
    | <span data-ttu-id="48bfc-173">Microsoft.Data.Edm</span><span class="sxs-lookup"><span data-stu-id="48bfc-173">Microsoft.Data.Edm</span></span> | <span data-ttu-id="48bfc-174">5.2.x</span><span class="sxs-lookup"><span data-stu-id="48bfc-174">5.2.x</span></span> | <span data-ttu-id="48bfc-175">5.6.x</span><span class="sxs-lookup"><span data-stu-id="48bfc-175">5.6.x</span></span> |
    | <span data-ttu-id="48bfc-176">Microsoft.AspNet.Mvc.FixedDisplayModes</span><span class="sxs-lookup"><span data-stu-id="48bfc-176">Microsoft.AspNet.Mvc.FixedDisplayModes</span></span> | <span data-ttu-id="48bfc-177"><o:p> </o:p></span><span class="sxs-lookup"><span data-stu-id="48bfc-177"><o:p> </o:p></span></span> | <span data-ttu-id="48bfc-178">Rimosso</span><span class="sxs-lookup"><span data-stu-id="48bfc-178">Removed</span></span> |
    | <span data-ttu-id="48bfc-179">Microsoft.AspNet.WebPages.Administration</span><span class="sxs-lookup"><span data-stu-id="48bfc-179">Microsoft.AspNet.WebPages.Administration</span></span> | <span data-ttu-id="48bfc-180"><o:p> </o:p></span><span class="sxs-lookup"><span data-stu-id="48bfc-180"><o:p> </o:p></span></span> | <span data-ttu-id="48bfc-181">Rimosso</span><span class="sxs-lookup"><span data-stu-id="48bfc-181">Removed</span></span> |
    | <span data-ttu-id="48bfc-182">Microsoft-Web-Helpers</span><span class="sxs-lookup"><span data-stu-id="48bfc-182">Microsoft-Web-Helpers</span></span> | <span data-ttu-id="48bfc-183"><o:p> </o:p></span><span class="sxs-lookup"><span data-stu-id="48bfc-183"><o:p> </o:p></span></span> | <span data-ttu-id="48bfc-184">Microsoft.AspNet.WebHelpers</span><span class="sxs-lookup"><span data-stu-id="48bfc-184">Microsoft.AspNet.WebHelpers</span></span> |

    > [!NOTE]
    > <span data-ttu-id="48bfc-185">Microsoft-Web-helper è stata sostituita con Microsoft.AspNet.WebHelpers.</span><span class="sxs-lookup"><span data-stu-id="48bfc-185">Microsoft-Web-Helpers has been replaced with Microsoft.AspNet.WebHelpers.</span></span> <span data-ttu-id="48bfc-186">È necessario rimuovere innanzitutto il pacchetto precedente e quindi installare il pacchetto più recente.</span><span class="sxs-lookup"><span data-stu-id="48bfc-186">You should remove the old package first, and then install the newer package.</span></span>   
    >   
    > <span data-ttu-id="48bfc-187">Non è Nessuna compatibilità di versione tra i vari pacchetti principali di ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="48bfc-187">There is no cross version compatibility among major ASP.NET packages.</span></span> <span data-ttu-id="48bfc-188">Ad esempio, MVC 5 è compatibile con solo 3 Razor e non 2 Razor.</span><span class="sxs-lookup"><span data-stu-id="48bfc-188">For example, MVC 5 is compatible with only Razor 3, and not Razor 2.</span></span>
4. <span data-ttu-id="48bfc-189">Aprire il progetto in Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="48bfc-189">Open your project in Visual Studio.</span></span>
5. <span data-ttu-id="48bfc-190">Rimuovere i seguenti pacchetti NuGet ASP.NET installati.</span><span class="sxs-lookup"><span data-stu-id="48bfc-190">Remove any of the following ASP.NET NuGet packages that are installed.</span></span> <span data-ttu-id="48bfc-191">Si rimuoverà le using Package Manager Console (console di gestione pacchetti).</span><span class="sxs-lookup"><span data-stu-id="48bfc-191">You will remove these using the Package Manager Console (PMC).</span></span> <span data-ttu-id="48bfc-192">Per aprire la console di gestione pacchetti, selezionare la **degli strumenti** menu e quindi selezionare **Gestione pacchetti NuGet** quindi selezionare **Package Manager Console**.</span><span class="sxs-lookup"><span data-stu-id="48bfc-192">To open the PMC, select the **Tools** menu and then select **NuGet Package Manager,** then select **Package Manager Console**.</span></span> <span data-ttu-id="48bfc-193">Il progetto potrebbe non includere tutti questi componenti.</span><span class="sxs-lookup"><span data-stu-id="48bfc-193">Your project might not include all of these.</span></span>

    1. `Microsoft.AspNet.WebPages.Administration`  
   <span data-ttu-id="48bfc-194">Questo pacchetto viene in genere aggiunto l'aggiornamento da MVC 3 a MVC 4.</span><span class="sxs-lookup"><span data-stu-id="48bfc-194">This package is typically added when upgrading from MVC 3 to MVC 4.</span></span> <span data-ttu-id="48bfc-195">Per rimuoverlo, eseguire il comando seguente nella console di gestione pacchetti:</span><span class="sxs-lookup"><span data-stu-id="48bfc-195">To remove it, run the following command in the PMC:</span></span>  
        `Uninstall-Package -Id Microsoft.AspNet.WebPages.Administration`
    2. `Microsoft-Web-Helpers`   
   <span data-ttu-id="48bfc-196">Questo pacchetto branding `Microsoft.AspNet.WebHelpers`.</span><span class="sxs-lookup"><span data-stu-id="48bfc-196">This package has been rebranded as `Microsoft.AspNet.WebHelpers`.</span></span> <span data-ttu-id="48bfc-197">Per rimuoverlo, eseguire il comando seguente nella console di gestione pacchetti:</span><span class="sxs-lookup"><span data-stu-id="48bfc-197">To remove it, run the following command in the PMC:</span></span>  
        `Uninstall-Package -Id Microsoft-Web-Helpers`
    3. `Microsoft.AspNet.Mvc.FixedDisplayMode`  
   <span data-ttu-id="48bfc-198">Questo pacchetto contiene una soluzione alternativa per un bug in MVC 4 che è stato risolto in MVC 5.</span><span class="sxs-lookup"><span data-stu-id="48bfc-198">This package contains a work around for a bug in MVC 4 that has been fixed in MVC 5.</span></span> <span data-ttu-id="48bfc-199">Per rimuoverlo, eseguire il comando seguente nella console di gestione pacchetti:</span><span class="sxs-lookup"><span data-stu-id="48bfc-199">To remove it, run the following command in the PMC:</span></span>  
        `Uninstall-Package -Id Microsoft.AspNet.Mvc.FixedDisplayModes`
6. <span data-ttu-id="48bfc-200">Eseguire l'aggiornamento di tutti i pacchetti NuGet ASP.NET usando la console di gestione pacchetti.</span><span class="sxs-lookup"><span data-stu-id="48bfc-200">Upgrade all the ASP.NET NuGet packages using the PMC.</span></span> <span data-ttu-id="48bfc-201">Nella console di gestione pacchetti, eseguire il comando seguente:</span><span class="sxs-lookup"><span data-stu-id="48bfc-201">In the PMC, run the following command:</span></span>  
    `Update-Package`  
   <span data-ttu-id="48bfc-202">Il `Update-Package` comando senza alcun parametro aggiornerà tutti i pacchetti.</span><span class="sxs-lookup"><span data-stu-id="48bfc-202">The `Update-Package` command without any parameters will update every package.</span></span> <span data-ttu-id="48bfc-203">È possibile aggiornare singolarmente i pacchetti tramite l'argomento di ID.</span><span class="sxs-lookup"><span data-stu-id="48bfc-203">You can update packages individually by using the ID argument.</span></span> <span data-ttu-id="48bfc-204">Per altre informazioni sul comando di aggiornamento, eseguire `get-help update-package` .</span><span class="sxs-lookup"><span data-stu-id="48bfc-204">For more information about the update command, run     `get-help update-package` .</span></span>

## <a name="update-the-application-webconfig-file"></a><span data-ttu-id="48bfc-205">Aggiornare l'applicazione *Web. config* File</span><span class="sxs-lookup"><span data-stu-id="48bfc-205">Update the Application *web.config* File</span></span>

<span data-ttu-id="48bfc-206">Assicurarsi di apportare queste modifiche nell'app *Web. config* file, non il *Web. config* del file nei *viste* cartella.</span><span class="sxs-lookup"><span data-stu-id="48bfc-206">Be sure to make these changes in the app *web.config* file, not the *web.config* file in the *Views* folder.</span></span>

<span data-ttu-id="48bfc-207">Individuare il `<runtime>/<assemblyBinding>` sezione e apportare le modifiche seguenti:</span><span class="sxs-lookup"><span data-stu-id="48bfc-207">Locate the `<runtime>/<assemblyBinding>` section, and make the following changes:</span></span>

1. <span data-ttu-id="48bfc-208">Negli elementi con l'attributo di nome "System", impostare il numero di versione da "4.0.0.0" su "versione=5.0.0.0".</span><span class="sxs-lookup"><span data-stu-id="48bfc-208">In the elements with the name attribute "System.Web.Mvc", change the version number from "4.0.0.0" to "5.0.0.0".</span></span> <span data-ttu-id="48bfc-209">(Due modifiche in tale elemento).</span><span class="sxs-lookup"><span data-stu-id="48bfc-209">(Two changes in that element.)</span></span>
2. <span data-ttu-id="48bfc-210">Negli elementi con l'attributo name &quot;spazi "e &quot;System.Web.WebPages&quot; impostare il numero di versione da"2.0.0.0"su"3.0.0.0".</span><span class="sxs-lookup"><span data-stu-id="48bfc-210">In elements with the name attribute &quot;System.Web.Helpers" and &quot;System.Web.WebPages&quot; change the version number from "2.0.0.0" to "3.0.0.0".</span></span> <span data-ttu-id="48bfc-211">Si verifica quattro modifiche, due in ognuno degli elementi.</span><span class="sxs-lookup"><span data-stu-id="48bfc-211">Four changes will occur, two in each of the elements.</span></span>

    [!code-xml[Main](how-to-upgrade-an-aspnet-mvc-4-and-web-api-project-to-aspnet-mvc-5-and-web-api-2/samples/sample3.xml?highlight=6,10,14)]
3. <span data-ttu-id="48bfc-212">Individuare il `<appSettings>` sezione e aggiornare il webpages:version da 2.0.0.0.0 a 3.0.0.0, come illustrato di seguito:</span><span class="sxs-lookup"><span data-stu-id="48bfc-212">Locate the `<appSettings>` section and update the webpages:version from 2.0.0.0.0 to 3.0.0.0 as shown below:</span></span>

    [!code-xml[Main](how-to-upgrade-an-aspnet-mvc-4-and-web-api-project-to-aspnet-mvc-5-and-web-api-2/samples/sample4.xml?highlight=2)]
4. <span data-ttu-id="48bfc-213">Rimuovere eventuali livelli di attendibilità totale.</span><span class="sxs-lookup"><span data-stu-id="48bfc-213">Remove any trust levels other than Full.</span></span> <span data-ttu-id="48bfc-214">Ad esempio:</span><span class="sxs-lookup"><span data-stu-id="48bfc-214">For example:</span></span>

    [!code-xml[Main](how-to-upgrade-an-aspnet-mvc-4-and-web-api-project-to-aspnet-mvc-5-and-web-api-2/samples/sample5.xml?highlight=2)]

## <a name="update-the-webconfig-files-under-the-views-folder"></a><span data-ttu-id="48bfc-215">Aggiorna il *Web. config* i file nella cartella Views</span><span class="sxs-lookup"><span data-stu-id="48bfc-215">Update the *web.config* files under the Views folder</span></span>

<span data-ttu-id="48bfc-216">Se l'applicazione usa le aree, è necessario anche aggiornare ognuno *Web. config* del file nei *viste* sottocartella di ogni cartella Area.</span><span class="sxs-lookup"><span data-stu-id="48bfc-216">If your application is using areas, you will also need to update each *web.config* file in the *Views* sub-folder of each Area folder.</span></span>

1. <span data-ttu-id="48bfc-217">Aggiornare tutti gli elementi che contengono "System" dalla versione "4.0.0.0" versione "versione=5.0.0.0".</span><span class="sxs-lookup"><span data-stu-id="48bfc-217">Update all elements that contain "System.Web.Mvc" from version "4.0.0.0" to version "5.0.0.0".</span></span>  

    [!code-xml[Main](how-to-upgrade-an-aspnet-mvc-4-and-web-api-project-to-aspnet-mvc-5-and-web-api-2/samples/sample6.xml?highlight=2)]

    [!code-xml[Main](how-to-upgrade-an-aspnet-mvc-4-and-web-api-project-to-aspnet-mvc-5-and-web-api-2/samples/sample7.xml?highlight=4-6,8)]
2. <span data-ttu-id="48bfc-218">Aggiornare tutti gli elementi che contengono "Webpages" dalla versione "2.0.0.0" versione "3.0.0.0".</span><span class="sxs-lookup"><span data-stu-id="48bfc-218">Update all elements that contain "System.Web.WebPages.Razor" from version "2.0.0.0" to version"3.0.0.0".</span></span> <span data-ttu-id="48bfc-219">Se in questa sezione contiene "System.Web.WebPages", aggiornare gli elementi dalla versione "2.0.0.0" versione "3.0.0.0"</span><span class="sxs-lookup"><span data-stu-id="48bfc-219">If this section contains "System.Web.WebPages", update those elements from version "2.0.0.0" to version"3.0.0.0"</span></span>  

    [!code-xml[Main](how-to-upgrade-an-aspnet-mvc-4-and-web-api-project-to-aspnet-mvc-5-and-web-api-2/samples/sample8.xml?highlight=3-5)]
3. <span data-ttu-id="48bfc-220">Se è stato rimosso il `Microsoft-Web-Helpers` installare il pacchetto NuGet in un passaggio precedente, `Microsoft.AspNet.WebHelpers` con il comando seguente nella console di gestione pacchetti:</span><span class="sxs-lookup"><span data-stu-id="48bfc-220">If you removed the `Microsoft-Web-Helpers` NuGet package in a previous step, install `Microsoft.AspNet.WebHelpers` with the following command in the PMC:</span></span>  
    `Install-Package -Id Microsoft.AspNet.WebHelpers`
4. <span data-ttu-id="48bfc-221">Se l'app Usa la [User.IsInRole()](https://msdn.microsoft.com/en-us/library/system.web.security.roleprincipal.isinrole(v=vs.110).aspx) metodo, aggiungere quanto segue per il *Web. config* file.</span><span class="sxs-lookup"><span data-stu-id="48bfc-221">If your app uses the [User.IsInRole()](https://msdn.microsoft.com/en-us/library/system.web.security.roleprincipal.isinrole(v=vs.110).aspx) method, add the following to the *Web.config* file.</span></span>

    [!code-xml[Main](how-to-upgrade-an-aspnet-mvc-4-and-web-api-project-to-aspnet-mvc-5-and-web-api-2/samples/sample9.xml)]

## <a name="final-steps"></a><span data-ttu-id="48bfc-222">Passaggi finali</span><span class="sxs-lookup"><span data-stu-id="48bfc-222">Final Steps</span></span>

<span data-ttu-id="48bfc-223">Compilare e testare l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="48bfc-223">Build and test the application.</span></span>

<span data-ttu-id="48bfc-224">Rimuovere il tipo di progetto MVC 4 GUID dai file di progetto.</span><span class="sxs-lookup"><span data-stu-id="48bfc-224">Remove the MVC 4 project type GUID from the project files.</span></span>

1. <span data-ttu-id="48bfc-225">In Esplora soluzioni fare doppio clic il nome del progetto e quindi selezionare **Scarica progetto**.</span><span class="sxs-lookup"><span data-stu-id="48bfc-225">In Solution Explorer, right-click the project name and then select **Unload Project**.</span></span>
2. <span data-ttu-id="48bfc-226">Fare clic sul progetto e scegliere Modifica NomeProgetto.</span><span class="sxs-lookup"><span data-stu-id="48bfc-226">Right-click the project and select Edit ProjectName.csproj.</span></span>
3. <span data-ttu-id="48bfc-227">Individuare il `ProjectTypeGuids` elemento e quindi GUID, del progetto MVC 4 remove `{E3E379DF-F4C6-4180-9B81-6769533ABE47}`.</span><span class="sxs-lookup"><span data-stu-id="48bfc-227">Locate the `ProjectTypeGuids` element and then remove the MVC 4 project GUID, `{E3E379DF-F4C6-4180-9B81-6769533ABE47}`.</span></span>
4. <span data-ttu-id="48bfc-228">Salvare e chiudere il file di progetto aperto.</span><span class="sxs-lookup"><span data-stu-id="48bfc-228">Save and close the open project file.</span></span>
5. <span data-ttu-id="48bfc-229">Fare clic sul progetto e selezionare **Ricarica progetto**.</span><span class="sxs-lookup"><span data-stu-id="48bfc-229">Right-click the project and select **Reload Project**.</span></span>
