---
title: Routing in ASP.NET Core
author: ardalis
description: Descrizione del modo in cui la funzionalità di routing di ASP.NET Core è responsabile del mapping di una richiesta in ingresso a un gestore di route.
ms.author: riande
ms.custom: mvc
ms.date: 10/01/2018
uid: fundamentals/routing
ms.openlocfilehash: 06059d720bd4444b1ec12e42d466ee54d1658203
ms.sourcegitcommit: 375e9a67f5e1f7b0faaa056b4b46294cc70f55b7
ms.translationtype: HT
ms.contentlocale: it-IT
ms.lasthandoff: 10/29/2018
ms.locfileid: "50207756"
---
# <a name="routing-in-aspnet-core"></a><span data-ttu-id="1a412-103">Routing in ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="1a412-103">Routing in ASP.NET Core</span></span>

<span data-ttu-id="1a412-104">Di [Ryan Nowak](https://github.com/rynowak), [Steve Smith](https://ardalis.com/) e [Rick Anderson](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="1a412-104">By [Ryan Nowak](https://github.com/rynowak), [Steve Smith](https://ardalis.com/), and [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

<span data-ttu-id="1a412-105">La funzionalità di routing è responsabile dell'esecuzione del mapping di una richiesta in ingresso a un gestore di route.</span><span class="sxs-lookup"><span data-stu-id="1a412-105">Routing functionality is responsible for mapping an incoming request to a route handler.</span></span> <span data-ttu-id="1a412-106">Le route sono definite nell'app e vengono configurate all'avvio dell'app.</span><span class="sxs-lookup"><span data-stu-id="1a412-106">Routes are defined in the app and configured when the app starts.</span></span> <span data-ttu-id="1a412-107">Una route può facoltativamente estrarre valori dall'URL contenuto nella richiesta e questi valori possono quindi essere usati per l'elaborazione della richiesta.</span><span class="sxs-lookup"><span data-stu-id="1a412-107">A route can optionally extract values from the URL contained in the request, and these values can then be used for request processing.</span></span> <span data-ttu-id="1a412-108">Usando le informazioni sulla route dell'app, la funzionalità di routing è anche in grado di generare URL che eseguono il mapping ai gestori di route.</span><span class="sxs-lookup"><span data-stu-id="1a412-108">Using route information from the app, the routing functionality is also able to generate URLs that map to route handlers.</span></span> <span data-ttu-id="1a412-109">Di conseguenza, il routing è in grado di trovare un gestore di route in base a un URL oppure di trovare l'URL corrispondente a un gestore di route specifico in base alle informazioni del gestore di route.</span><span class="sxs-lookup"><span data-stu-id="1a412-109">Therefore, routing can find a route handler based on a URL, or find the URL corresponding to a given route handler based on route handler information.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="1a412-110">Questo documento descrive il routing di basso livello di ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="1a412-110">This document covers low-level ASP.NET Core routing.</span></span> <span data-ttu-id="1a412-111">Per informazioni sul routing di ASP.NET Core MVC, vedere <xref:mvc/controllers/routing>.</span><span class="sxs-lookup"><span data-stu-id="1a412-111">For information on ASP.NET Core MVC routing, see <xref:mvc/controllers/routing>.</span></span>

<span data-ttu-id="1a412-112">[Visualizzare o scaricare il codice di esempio](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/samples) ([procedura per il download](xref:index#how-to-download-a-sample))</span><span class="sxs-lookup"><span data-stu-id="1a412-112">[View or download sample code](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/samples) ([how to download](xref:index#how-to-download-a-sample))</span></span>

## <a name="routing-basics"></a><span data-ttu-id="1a412-113">Nozioni fondamentali sul routing</span><span class="sxs-lookup"><span data-stu-id="1a412-113">Routing basics</span></span>

<span data-ttu-id="1a412-114">Il routing usa le *route* (implementazioni di <xref:Microsoft.AspNetCore.Routing.IRouter>) per:</span><span class="sxs-lookup"><span data-stu-id="1a412-114">Routing uses *routes* (implementations of <xref:Microsoft.AspNetCore.Routing.IRouter>) to:</span></span>

* <span data-ttu-id="1a412-115">Eseguire il mapping di richieste in ingresso ai *gestori di route*.</span><span class="sxs-lookup"><span data-stu-id="1a412-115">Map incoming requests to *route handlers*.</span></span>
* <span data-ttu-id="1a412-116">Generare gli URL usati nelle risposte.</span><span class="sxs-lookup"><span data-stu-id="1a412-116">Generate URLs used in responses.</span></span>

<span data-ttu-id="1a412-117">In genere, un'app ha un'unica raccolta di route.</span><span class="sxs-lookup"><span data-stu-id="1a412-117">Generally, an app has a single collection of routes.</span></span> <span data-ttu-id="1a412-118">Quando arriva una richiesta, la raccolta di route viene elaborata in ordine.</span><span class="sxs-lookup"><span data-stu-id="1a412-118">When a request arrives, the route collection is processed in order.</span></span> <span data-ttu-id="1a412-119">La richiesta in ingresso cerca una route corrispondente all'URL di richiesta chiamando il metodo <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> per ogni route disponibile nella raccolta di route.</span><span class="sxs-lookup"><span data-stu-id="1a412-119">The incoming request looks for a route that matches the request URL by calling the <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> method on each available route in the route collection.</span></span> <span data-ttu-id="1a412-120">Al contrario, una risposta può usare il routing per generare URL, ad esempio per il reindirizzamento o i collegamenti, in base alle informazioni sulla route. In questo modo si evita di impostare gli URL come hardcoded ottimizzando la manutenibilità.</span><span class="sxs-lookup"><span data-stu-id="1a412-120">By contrast, a response can use routing to generate URLs (for example, for redirection or links) based on route information and thus avoid having to hard-code URLs, which helps maintainability.</span></span>

<span data-ttu-id="1a412-121">Il routing è connesso alla pipeline [middleware](xref:fundamentals/middleware/index) per mezzo della classe <xref:Microsoft.AspNetCore.Builder.RouterMiddleware>.</span><span class="sxs-lookup"><span data-stu-id="1a412-121">Routing is connected to the [middleware](xref:fundamentals/middleware/index) pipeline by the <xref:Microsoft.AspNetCore.Builder.RouterMiddleware> class.</span></span> <span data-ttu-id="1a412-122">[ASP.NET Core MVC](xref:mvc/overview) aggiunge il routing alla pipeline middleware come parte della configurazione.</span><span class="sxs-lookup"><span data-stu-id="1a412-122">[ASP.NET Core MVC](xref:mvc/overview) adds routing to the middleware pipeline as part of its configuration.</span></span> <span data-ttu-id="1a412-123">Per informazioni sull'uso del routing come componente autonomo, vedere la sezione [Usare il middleware di routing](#use-routing-middleware).</span><span class="sxs-lookup"><span data-stu-id="1a412-123">To learn about using routing as a standalone component, see [Use Routing Middleware](#use-routing-middleware) section.</span></span>

### <a name="url-matching"></a><span data-ttu-id="1a412-124">Corrispondenza URL</span><span class="sxs-lookup"><span data-stu-id="1a412-124">URL matching</span></span>

<span data-ttu-id="1a412-125">La corrispondenza dell'URL è il processo con cui il routing invia una richiesta in ingresso a un *gestore*.</span><span class="sxs-lookup"><span data-stu-id="1a412-125">URL matching is the process by which routing dispatches an incoming request to a *handler*.</span></span> <span data-ttu-id="1a412-126">Questo processo si basa sui dati presenti nel percorso URL, ma può essere esteso in modo da prendere in considerazione tutti i dati della richiesta.</span><span class="sxs-lookup"><span data-stu-id="1a412-126">This process is based on data in the URL path but can be extended to consider any data in the request.</span></span> <span data-ttu-id="1a412-127">La possibilità di inviare le richieste a gestori separati è fondamentale per ridurre le dimensioni e la complessità di un'app.</span><span class="sxs-lookup"><span data-stu-id="1a412-127">The ability to dispatch requests to separate handlers is key to scaling the size and complexity of an app.</span></span>

<span data-ttu-id="1a412-128">Le richieste in ingresso immettono `RouterMiddleware`, che chiama il metodo <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> per ogni route della sequenza.</span><span class="sxs-lookup"><span data-stu-id="1a412-128">Incoming requests enter the `RouterMiddleware`, which calls the <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> method on each route in sequence.</span></span> <span data-ttu-id="1a412-129">L'istanza di <xref:Microsoft.AspNetCore.Routing.IRouter> sceglie se *gestire* la richiesta impostando [RouteContext.Handler](xref:Microsoft.AspNetCore.Routing.RouteContext.Handler*) su un valore <xref:Microsoft.AspNetCore.Http.RequestDelegate> non Null.</span><span class="sxs-lookup"><span data-stu-id="1a412-129">The <xref:Microsoft.AspNetCore.Routing.IRouter> instance chooses whether to *handle* the request by setting the [RouteContext.Handler](xref:Microsoft.AspNetCore.Routing.RouteContext.Handler*) to a non-null <xref:Microsoft.AspNetCore.Http.RequestDelegate>.</span></span> <span data-ttu-id="1a412-130">Se una route imposta un gestore per la richiesta, l'elaborazione della route si interrompe e viene richiamato il gestore per elaborare la richiesta.</span><span class="sxs-lookup"><span data-stu-id="1a412-130">If a route sets a handler for the request, route processing stops, and the handler is invoked to process the request.</span></span> <span data-ttu-id="1a412-131">Se si prova con tutte le route e non viene trovato alcun gestore per la richiesta, il middleware chiama *next* e viene richiamato il middleware successivo nella pipeline di richieste.</span><span class="sxs-lookup"><span data-stu-id="1a412-131">If all routes are tried and no handler is found for the request, the middleware calls *next*, and the next middleware in the request pipeline is invoked.</span></span>

<span data-ttu-id="1a412-132">L'input principale per `RouteAsync` è l'elemento [RouteContext.HttpContext](xref:Microsoft.AspNetCore.Routing.RouteContext.HttpContext*) associato alla richiesta corrente.</span><span class="sxs-lookup"><span data-stu-id="1a412-132">The primary input to `RouteAsync` is the [RouteContext.HttpContext](xref:Microsoft.AspNetCore.Routing.RouteContext.HttpContext*) associated with the current request.</span></span> <span data-ttu-id="1a412-133">`RouteContext.Handler` e [RouteContext.RouteData](xref:Microsoft.AspNetCore.Routing.RouteContext.RouteData*) sono gli output che vengono impostati quando una route corrisponde.</span><span class="sxs-lookup"><span data-stu-id="1a412-133">The `RouteContext.Handler` and [RouteContext.RouteData](xref:Microsoft.AspNetCore.Routing.RouteContext.RouteData*) are outputs set after a route matches.</span></span>

<span data-ttu-id="1a412-134">Una corrispondenza durante `RouteAsync` imposta anche le proprietà di `RouteContext.RouteData` sui valori appropriati in base all'elaborazione della richiesta eseguita fino a questo punto.</span><span class="sxs-lookup"><span data-stu-id="1a412-134">A match during `RouteAsync` also sets the properties of the `RouteContext.RouteData` to appropriate values based on the request processing performed thus far.</span></span> <span data-ttu-id="1a412-135">Se una route corrisponde a una richiesta, `RouteContext.RouteData` contiene informazioni importanti sullo stato relative al *risultato*.</span><span class="sxs-lookup"><span data-stu-id="1a412-135">If a route matches a request, the `RouteContext.RouteData` contains important state information about the *result*.</span></span>

<span data-ttu-id="1a412-136">[RouteData.Values](xref:Microsoft.AspNetCore.Routing.RouteData.Values*) è un dizionario di *valori di route* prodotti dalla route.</span><span class="sxs-lookup"><span data-stu-id="1a412-136">[RouteData.Values](xref:Microsoft.AspNetCore.Routing.RouteData.Values*) is a dictionary of *route values* produced from the route.</span></span> <span data-ttu-id="1a412-137">Questi valori in genere sono determinati dalla suddivisione in token dell'URL e possono essere usati per accettare l'input dell'utente o per prendere ulteriori decisioni riguardo all'invio all'interno dell'app.</span><span class="sxs-lookup"><span data-stu-id="1a412-137">These values are usually determined by tokenizing the URL and can be used to accept user input or to make further dispatching decisions inside the app.</span></span>

<span data-ttu-id="1a412-138">[RouteData.DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*) è un elenco proprietà dei dati aggiuntivi correlati alla route corrispondente.</span><span class="sxs-lookup"><span data-stu-id="1a412-138">[RouteData.DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*) is a property bag of additional data related to the matched route.</span></span> <span data-ttu-id="1a412-139">Grazie agli elementi `DataTokens` è possibile supportare l'associazione dei dati sullo stato con ogni route in modo che in un secondo momento l'app sia in grado di prendere decisioni in base alla route corrispondente.</span><span class="sxs-lookup"><span data-stu-id="1a412-139">`DataTokens` are provided to support associating state data with each route so that the app can make decisions later based on which route matched.</span></span> <span data-ttu-id="1a412-140">Questi valori sono definiti dallo sviluppatore e **non** influiscono sul comportamento del routing in alcun modo.</span><span class="sxs-lookup"><span data-stu-id="1a412-140">These values are developer-defined and do **not** affect the behavior of routing in any way.</span></span> <span data-ttu-id="1a412-141">Inoltre i valori accantonati in `RouteData.DataTokens` possono essere di qualsiasi tipo, a differenza dei valori `RouteData.Values`, che devono essere facilmente convertibili a e da stringhe.</span><span class="sxs-lookup"><span data-stu-id="1a412-141">Additionally, values stashed in `RouteData.DataTokens` can be of any type, in contrast to `RouteData.Values`, which must be easily convertible to and from strings.</span></span>

<span data-ttu-id="1a412-142">[RouteData.Routers](xref:Microsoft.AspNetCore.Routing.RouteData.Routers*) è un elenco delle route che hanno preso parte alla corrispondenza corretta della richiesta.</span><span class="sxs-lookup"><span data-stu-id="1a412-142">[RouteData.Routers](xref:Microsoft.AspNetCore.Routing.RouteData.Routers*) is a list of the routes that took part in successfully matching the request.</span></span> <span data-ttu-id="1a412-143">Le route possono essere annidate l'una nell'altra.</span><span class="sxs-lookup"><span data-stu-id="1a412-143">Routes can be nested inside of one another.</span></span> <span data-ttu-id="1a412-144">La proprietà `Routers` rispecchia il percorso tramite l'albero logico di route che hanno prodotto una corrispondenza.</span><span class="sxs-lookup"><span data-stu-id="1a412-144">The `Routers` property reflects the path through the logical tree of routes that resulted in a match.</span></span> <span data-ttu-id="1a412-145">In genere il primo elemento in `Routers` è la raccolta di route e deve essere usato per la generazione di URL.</span><span class="sxs-lookup"><span data-stu-id="1a412-145">Generally, the first item in `Routers` is the route collection and should be used for URL generation.</span></span> <span data-ttu-id="1a412-146">L'ultimo elemento in `Routers` è il gestore di route corrispondente.</span><span class="sxs-lookup"><span data-stu-id="1a412-146">The last item in `Routers` is the route handler that matched.</span></span>

### <a name="url-generation"></a><span data-ttu-id="1a412-147">Generazione di URL</span><span class="sxs-lookup"><span data-stu-id="1a412-147">URL generation</span></span>

<span data-ttu-id="1a412-148">La generazione di URL è il processo con cui il routing crea un percorso URL basato su un set di valori di route.</span><span class="sxs-lookup"><span data-stu-id="1a412-148">URL generation is the process by which routing can create a URL path based on a set of route values.</span></span> <span data-ttu-id="1a412-149">Questo consente di avere una separazione logica tra i gestori e gli URL che vi accedono.</span><span class="sxs-lookup"><span data-stu-id="1a412-149">This allows for a logical separation between your handlers and the URLs that access them.</span></span>

<span data-ttu-id="1a412-150">La generazione di URL segue un processo iterativo simile, ma inizia con la chiamata del codice dell'utente o del framework nel metodo <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> della raccolta di route.</span><span class="sxs-lookup"><span data-stu-id="1a412-150">URL generation follows a similar iterative process, but it starts with user or framework code calling into the <xref:Microsoft.AspNetCore.Routing.IRouter.GetVirtualPath*> method of the route collection.</span></span> <span data-ttu-id="1a412-151">Per ogni *route* viene quindi chiamato in sequenza il metodo `GetVirtualPath` finché non viene restituito un valore <xref:Microsoft.AspNetCore.Routing.VirtualPathData> non Null.</span><span class="sxs-lookup"><span data-stu-id="1a412-151">Each *route* then has its `GetVirtualPath` method called in sequence until a non-null <xref:Microsoft.AspNetCore.Routing.VirtualPathData> is returned.</span></span>

<span data-ttu-id="1a412-152">Gli input primari per `GetVirtualPath` sono:</span><span class="sxs-lookup"><span data-stu-id="1a412-152">The primary inputs to `GetVirtualPath` are:</span></span>

* [<span data-ttu-id="1a412-153">VirtualPathContext.HttpContext</span><span class="sxs-lookup"><span data-stu-id="1a412-153">VirtualPathContext.HttpContext</span></span>](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.HttpContext*)
* [<span data-ttu-id="1a412-154">VirtualPathContext.Values</span><span class="sxs-lookup"><span data-stu-id="1a412-154">VirtualPathContext.Values</span></span>](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.Values*)
* [<span data-ttu-id="1a412-155">VirtualPathContext.AmbientValues</span><span class="sxs-lookup"><span data-stu-id="1a412-155">VirtualPathContext.AmbientValues</span></span>](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.AmbientValues*)

<span data-ttu-id="1a412-156">Le route usano principalmente i valori di route specificati da `Values` e `AmbientValues` per decidere se è possibile generare un URL e quali valori includere.</span><span class="sxs-lookup"><span data-stu-id="1a412-156">Routes primarily use the route values provided by the `Values` and `AmbientValues` to decide whether it's possible to generate a URL and what values to include.</span></span> <span data-ttu-id="1a412-157">Gli elementi `AmbientValues` sono il set di valori di route prodotti dalla corrispondenza della richiesta corrente con il sistema di routing.</span><span class="sxs-lookup"><span data-stu-id="1a412-157">The `AmbientValues` are the set of route values that were produced from matching the current request with the routing system.</span></span> <span data-ttu-id="1a412-158">Al contrario, gli elementi `Values` sono i valori di route che specificano in che modo viene generato l'URL per l'operazione corrente.</span><span class="sxs-lookup"><span data-stu-id="1a412-158">In contrast, `Values` are the route values that specify how to generate the desired URL for the current operation.</span></span> <span data-ttu-id="1a412-159">`HttpContext` viene specificato nel caso in cui una route richieda la disponibilità di servizi o dati aggiuntivi associati al contesto corrente.</span><span class="sxs-lookup"><span data-stu-id="1a412-159">The `HttpContext` is provided in case a route needs to obtain services or additional data associated with the current context.</span></span>

> [!TIP]
> <span data-ttu-id="1a412-160">Considerare [VirtualPathContext.Values](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.Values*) come un set di override per [VirtualPathContext.AmbientValues](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.AmbientValues*).</span><span class="sxs-lookup"><span data-stu-id="1a412-160">Think of [VirtualPathContext.Values](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.Values*) as being a set of overrides for the [VirtualPathContext.AmbientValues](xref:Microsoft.AspNetCore.Routing.VirtualPathContext.AmbientValues*).</span></span> <span data-ttu-id="1a412-161">La generazione di URL prova a usare nuovamente i valori di route della richiesta corrente per semplificare la generazione di URL per i collegamenti che usano la stessa route o gli stessi valori di route.</span><span class="sxs-lookup"><span data-stu-id="1a412-161">URL generation attempts to reuse route values from the current request to make it easy to generate URLs for links using the same route or route values.</span></span>

<span data-ttu-id="1a412-162">L'output di `GetVirtualPath` è un oggetto `VirtualPathData`.</span><span class="sxs-lookup"><span data-stu-id="1a412-162">The output of `GetVirtualPath` is a `VirtualPathData`.</span></span> <span data-ttu-id="1a412-163">`VirtualPathData` è un elemento parallelo di `RouteData`.</span><span class="sxs-lookup"><span data-stu-id="1a412-163">`VirtualPathData` is a parallel of `RouteData`.</span></span> <span data-ttu-id="1a412-164">`VirtualPathData` contiene l'elemento `VirtualPath` per l'URL di output e alcune proprietà aggiuntive che devono essere impostate dalla route.</span><span class="sxs-lookup"><span data-stu-id="1a412-164">`VirtualPathData` contains the `VirtualPath` for the output URL and some additional properties that should be set by the route.</span></span>

<span data-ttu-id="1a412-165">La proprietà [VirtualPathData.VirtualPath](xref:Microsoft.AspNetCore.Routing.VirtualPathData.VirtualPath*) contiene il *percorso virtuale* prodotto dalla route.</span><span class="sxs-lookup"><span data-stu-id="1a412-165">The [VirtualPathData.VirtualPath](xref:Microsoft.AspNetCore.Routing.VirtualPathData.VirtualPath*) property contains the *virtual path* produced by the route.</span></span> <span data-ttu-id="1a412-166">In base alle esigenze specifiche, può essere necessario elaborare ulteriormente il percorso.</span><span class="sxs-lookup"><span data-stu-id="1a412-166">Depending on your needs, you may need to process the path further.</span></span> <span data-ttu-id="1a412-167">Se si vuole eseguire il rendering in HTML dell'URL generato, anteporre il percorso di base dell'app.</span><span class="sxs-lookup"><span data-stu-id="1a412-167">If you want to render the generated URL in HTML, prepend the base path of the app.</span></span>

<span data-ttu-id="1a412-168">[VirtualPathData.Router](xref:Microsoft.AspNetCore.Routing.VirtualPathData.Router*) è un riferimento alla route che ha generato correttamente l'URL.</span><span class="sxs-lookup"><span data-stu-id="1a412-168">The [VirtualPathData.Router](xref:Microsoft.AspNetCore.Routing.VirtualPathData.Router*) is a reference to the route that successfully generated the URL.</span></span>

<span data-ttu-id="1a412-169">[VirtualPathData.DataTokens](xref:Microsoft.AspNetCore.Routing.VirtualPathData.DataTokens*) è un dizionario di dati aggiuntivi correlati alla route che ha generato l'URL.</span><span class="sxs-lookup"><span data-stu-id="1a412-169">The [VirtualPathData.DataTokens](xref:Microsoft.AspNetCore.Routing.VirtualPathData.DataTokens*) properties is a dictionary of additional data related to the route that generated the URL.</span></span> <span data-ttu-id="1a412-170">È l'elemento parallelo di [RouteData.DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*).</span><span class="sxs-lookup"><span data-stu-id="1a412-170">This is the parallel of [RouteData.DataTokens](xref:Microsoft.AspNetCore.Routing.RouteData.DataTokens*).</span></span>

### <a name="creating-routes"></a><span data-ttu-id="1a412-171">Creazione di route</span><span class="sxs-lookup"><span data-stu-id="1a412-171">Creating routes</span></span>

<span data-ttu-id="1a412-172">Il routing specifica la classe <xref:Microsoft.AspNetCore.Routing.Route> come implementazione standard di <xref:Microsoft.AspNetCore.Routing.IRouter>.</span><span class="sxs-lookup"><span data-stu-id="1a412-172">Routing provides the <xref:Microsoft.AspNetCore.Routing.Route> class as the standard implementation of <xref:Microsoft.AspNetCore.Routing.IRouter>.</span></span> <span data-ttu-id="1a412-173">`Route` usa la sintassi del *modello di route* per definire i criteri in base ai quali confrontare il percorso URL quando si chiama <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*>.</span><span class="sxs-lookup"><span data-stu-id="1a412-173">`Route` uses the *route template* syntax to define patterns that match against the URL path when <xref:Microsoft.AspNetCore.Routing.IRouter.RouteAsync*> is called.</span></span> <span data-ttu-id="1a412-174">`Route` usa lo stesso modello di route per generare un URL quando si chiama `GetVirtualPath`.</span><span class="sxs-lookup"><span data-stu-id="1a412-174">`Route` uses the same route template to generate a URL when `GetVirtualPath` is called.</span></span>

<span data-ttu-id="1a412-175">La maggior parte delle app crea le route chiamando <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> o uno dei metodi di estensione simili definiti per <xref:Microsoft.AspNetCore.Routing.IRouteBuilder>.</span><span class="sxs-lookup"><span data-stu-id="1a412-175">Most apps create routes by calling <xref:Microsoft.AspNetCore.Builder.MapRouteRouteBuilderExtensions.MapRoute*> or one of the similar extension methods defined on <xref:Microsoft.AspNetCore.Routing.IRouteBuilder>.</span></span> <span data-ttu-id="1a412-176">Questi metodi creano tutti un'istanza di <xref:Microsoft.AspNetCore.Routing.Route> e la aggiungono alla raccolta di route.</span><span class="sxs-lookup"><span data-stu-id="1a412-176">All of these methods create an instance of <xref:Microsoft.AspNetCore.Routing.Route> and add it to the route collection.</span></span>

<span data-ttu-id="1a412-177">`MapRoute` non accetta alcun parametro del gestore di route.</span><span class="sxs-lookup"><span data-stu-id="1a412-177">`MapRoute` doesn't take a route handler parameter.</span></span> <span data-ttu-id="1a412-178">`MapRoute` aggiunge solo le route che sono gestite da <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>.</span><span class="sxs-lookup"><span data-stu-id="1a412-178">`MapRoute` only adds routes that are handled by the <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>.</span></span> <span data-ttu-id="1a412-179">Poiché il gestore predefinito è un oggetto `IRouter`, può decidere di non gestire la richiesta.</span><span class="sxs-lookup"><span data-stu-id="1a412-179">Since the default handler is an `IRouter`, it may decide not to handle the request.</span></span> <span data-ttu-id="1a412-180">Ad esempio, ASP.NET Core MVC viene in genere configurato come un gestore predefinito che gestisce solo le richieste che corrispondono a un'azione e un controller disponibili.</span><span class="sxs-lookup"><span data-stu-id="1a412-180">For example, ASP.NET Core MVC is typically configured as a default handler that only handles requests that match an available controller and action.</span></span> <span data-ttu-id="1a412-181">Per altre informazioni sul routing per MVC, vedere <xref:mvc/controllers/routing>.</span><span class="sxs-lookup"><span data-stu-id="1a412-181">To learn more about routing to MVC, see <xref:mvc/controllers/routing>.</span></span>

<span data-ttu-id="1a412-182">L'esempio di codice seguente si riferisce a una chiamata `MapRoute` usata da una tipica definizione di route di ASP.NET Core MVC:</span><span class="sxs-lookup"><span data-stu-id="1a412-182">The following code example is an example of a `MapRoute` call used by a typical ASP.NET Core MVC route definition:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="1a412-183">Questo modello confronta un percorso URL come `/Products/Details/17` ed estrae i valori di route `{ controller = Products, action = Details, id = 17 }`.</span><span class="sxs-lookup"><span data-stu-id="1a412-183">This template matches a URL path like `/Products/Details/17` and extracts the route values `{ controller = Products, action = Details, id = 17 }`.</span></span> <span data-ttu-id="1a412-184">I valori di route vengono determinati suddividendo il percorso URL in segmenti e confrontando ogni segmento con il nome del *parametro di route* nel modello di route.</span><span class="sxs-lookup"><span data-stu-id="1a412-184">The route values are determined by splitting the URL path into segments and matching each segment with the *route parameter* name in the route template.</span></span> <span data-ttu-id="1a412-185">I parametri di route sono denominati.</span><span class="sxs-lookup"><span data-stu-id="1a412-185">Route parameters are named.</span></span> <span data-ttu-id="1a412-186">Vengono definiti racchiudendo il nome del parametro tra parentesi graffe `{ ... }`.</span><span class="sxs-lookup"><span data-stu-id="1a412-186">They're defined by enclosing the parameter name in braces `{ ... }`.</span></span>

<span data-ttu-id="1a412-187">Il modello precedente può anche confrontare il percorso URL `/` generando i valori `{ controller = Home, action = Index }`.</span><span class="sxs-lookup"><span data-stu-id="1a412-187">The preceding template could also match the URL path `/` and would produce the values `{ controller = Home, action = Index }`.</span></span> <span data-ttu-id="1a412-188">Ciò accade perché i parametri di route `{controller}` e `{action}` hanno valori predefiniti e il parametro di route `id` è facoltativo.</span><span class="sxs-lookup"><span data-stu-id="1a412-188">This occurs because the `{controller}` and `{action}` route parameters have default values and the `id` route parameter is optional.</span></span> <span data-ttu-id="1a412-189">Un segno di uguale `=` seguito da un valore dopo il nome del parametro di route definisce un valore predefinito per il parametro.</span><span class="sxs-lookup"><span data-stu-id="1a412-189">An equals `=` sign followed by a value after the route parameter name defines a default value for the parameter.</span></span> <span data-ttu-id="1a412-190">Un punto interrogativo `?` dopo il nome del parametro di route definisce il parametro come facoltativo.</span><span class="sxs-lookup"><span data-stu-id="1a412-190">A question mark `?` after the route parameter name defines the parameter as optional.</span></span> <span data-ttu-id="1a412-191">I parametri di route con un valore predefinito producono *sempre* un valore di route quando la route corrisponde.</span><span class="sxs-lookup"><span data-stu-id="1a412-191">Route parameters with a default value *always* produce a route value when the route matches.</span></span> <span data-ttu-id="1a412-192">I parametri facoltativi non producono alcun valore di route se non esiste un segmento di percorso URL corrispondente.</span><span class="sxs-lookup"><span data-stu-id="1a412-192">Optional parameters don't produce a route value if there was no corresponding URL path segment.</span></span>

<span data-ttu-id="1a412-193">Vedere [Riferimento per i modelli di route](#route-template-reference) per una descrizione completa delle funzionalità e della sintassi del modello di route.</span><span class="sxs-lookup"><span data-stu-id="1a412-193">See [route-template-reference](#route-template-reference) for a thorough description of route template features and syntax.</span></span>

<span data-ttu-id="1a412-194">Questo esempio include un *vincolo di route*:</span><span class="sxs-lookup"><span data-stu-id="1a412-194">This example includes a *route constraint*:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id:int}");
```

<span data-ttu-id="1a412-195">Questo modello confronta un percorso URL come `/Products/Details/17`, ma non `/Products/Details/Apples`.</span><span class="sxs-lookup"><span data-stu-id="1a412-195">This template matches a URL path like `/Products/Details/17` but not `/Products/Details/Apples`.</span></span> <span data-ttu-id="1a412-196">La definizione del parametro di route `{id:int}` definisce un [vincolo di route](#route-constraint-reference) per il parametro di route `id`.</span><span class="sxs-lookup"><span data-stu-id="1a412-196">The route parameter definition `{id:int}` defines a [route constraint](#route-constraint-reference) for the `id` route parameter.</span></span> <span data-ttu-id="1a412-197">I vincoli di route implementano <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> ed esaminano i valori di route per verificarli.</span><span class="sxs-lookup"><span data-stu-id="1a412-197">Route constraints implement <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> and inspect route values to verify them.</span></span> <span data-ttu-id="1a412-198">In questo esempio il valore di route `id` deve poter essere convertito in un numero intero.</span><span class="sxs-lookup"><span data-stu-id="1a412-198">In this example, the route value `id` must be convertible to an integer.</span></span> <span data-ttu-id="1a412-199">Vedere [Riferimento per i vincoli di route](#route-constraint-reference) per una spiegazione più dettagliata dei vincoli di route specificati dal framework.</span><span class="sxs-lookup"><span data-stu-id="1a412-199">See [route-constraint-reference](#route-constraint-reference) for a more detailed explanation of route constraints that are provided by the framework.</span></span>

<span data-ttu-id="1a412-200">Altri overload di `MapRoute` accettano i valori per `constraints`, `dataTokens` e `defaults`.</span><span class="sxs-lookup"><span data-stu-id="1a412-200">Additional overloads of `MapRoute` accept values for `constraints`, `dataTokens`, and `defaults`.</span></span> <span data-ttu-id="1a412-201">Questi parametri aggiuntivi di `MapRoute` sono definiti come tipo `object`.</span><span class="sxs-lookup"><span data-stu-id="1a412-201">These additional parameters of `MapRoute` are defined as type `object`.</span></span> <span data-ttu-id="1a412-202">L'uso tipico di questi parametri è passare un oggetto tipizzato in modo anonimo, in cui i nomi di proprietà di tipo anonimo corrispondono ai nomi dei parametri di route.</span><span class="sxs-lookup"><span data-stu-id="1a412-202">The typical usage of these parameters is to pass an anonymously typed object, where the property names of the anonymous type match route parameter names.</span></span>

<span data-ttu-id="1a412-203">I due esempi seguenti creano route equivalenti:</span><span class="sxs-lookup"><span data-stu-id="1a412-203">The following two examples create equivalent routes:</span></span>

```csharp
routes.MapRoute(
    name: "default_route",
    template: "{controller}/{action}/{id?}",
    defaults: new { controller = "Home", action = "Index" });

routes.MapRoute(
    name: "default_route",
    template: "{controller=Home}/{action=Index}/{id?}");
```

> [!TIP]
> <span data-ttu-id="1a412-204">La sintassi inline per definire i vincoli e i valori predefiniti può essere utile per le route semplici.</span><span class="sxs-lookup"><span data-stu-id="1a412-204">The inline syntax for defining constraints and defaults can be convenient for simple routes.</span></span> <span data-ttu-id="1a412-205">Esistono però funzionalità, come i token di dati, che non sono supportate dalla sintassi inline.</span><span class="sxs-lookup"><span data-stu-id="1a412-205">However, there are features, such as data tokens, that aren't supported by inline syntax.</span></span>

<span data-ttu-id="1a412-206">L'esempio seguente illustra qualche altro scenario:</span><span class="sxs-lookup"><span data-stu-id="1a412-206">The following example demonstrates a few more scenarios:</span></span>

```csharp
routes.MapRoute(
    name: "blog",
    template: "Blog/{*article}",
    defaults: new { controller = "Blog", action = "ReadArticle" });
```

<span data-ttu-id="1a412-207">Questo modello confronta un percorso URL come `/Blog/All-About-Routing/Introduction` ed estrae i valori `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`.</span><span class="sxs-lookup"><span data-stu-id="1a412-207">This template matches a URL path like `/Blog/All-About-Routing/Introduction` and extracts the values `{ controller = Blog, action = ReadArticle, article = All-About-Routing/Introduction }`.</span></span> <span data-ttu-id="1a412-208">I valori di route predefiniti per `controller` e `action` vengono generati dalla route anche se sono non presenti parametri di route corrispondenti nel modello.</span><span class="sxs-lookup"><span data-stu-id="1a412-208">The default route values for `controller` and `action` are produced by the route even though there are no corresponding route parameters in the template.</span></span> <span data-ttu-id="1a412-209">I valori predefiniti possono essere specificati nel modello di route.</span><span class="sxs-lookup"><span data-stu-id="1a412-209">Default values can be specified in the route template.</span></span> <span data-ttu-id="1a412-210">Il parametro di route `article` è definito come *catch-all* dall'aspetto di un asterisco `*` prima del nome del parametro di route.</span><span class="sxs-lookup"><span data-stu-id="1a412-210">The `article` route parameter is defined as a *catch-all* by the appearance of an asterisk `*` before the route parameter name.</span></span> <span data-ttu-id="1a412-211">I parametri di route catch-all acquisiscono il resto del percorso URL e possono anche corrispondere alla stringa vuota.</span><span class="sxs-lookup"><span data-stu-id="1a412-211">Catch-all route parameters capture the remainder of the URL path and can also match the empty string.</span></span>

<span data-ttu-id="1a412-212">In questo esempio vengono aggiunti i vincoli di route e i token di dati:</span><span class="sxs-lookup"><span data-stu-id="1a412-212">This example adds route constraints and data tokens:</span></span>

```csharp
routes.MapRoute(
    name: "us_english_products",
    template: "en-US/Products/{id}",
    defaults: new { controller = "Products", action = "Details" },
    constraints: new { id = new IntRouteConstraint() },
    dataTokens: new { locale = "en-US" });
```

<span data-ttu-id="1a412-213">Questo modello confronta un percorso URL come `/en-US/Products/5` ed estrae i valori `{ controller = Products, action = Details, id = 5 }` e i token di dati `{ locale = en-US }`.</span><span class="sxs-lookup"><span data-stu-id="1a412-213">This template matches a URL path like `/en-US/Products/5` and extracts the values `{ controller = Products, action = Details, id = 5 }` and the data tokens `{ locale = en-US }`.</span></span>

![Token della finestra Variabili locali](routing/_static/tokens.png)

### <a name="url-generation"></a><span data-ttu-id="1a412-215">Generazione di URL</span><span class="sxs-lookup"><span data-stu-id="1a412-215">URL generation</span></span>

<span data-ttu-id="1a412-216">La classe `Route` è inoltre in grado di eseguire la generazione di URL combinando un set di valori di route con il relativo modello di route.</span><span class="sxs-lookup"><span data-stu-id="1a412-216">The `Route` class can also perform URL generation by combining a set of route values with its route template.</span></span> <span data-ttu-id="1a412-217">Questo è logicamente il processo inverso di corrispondenza del percorso URL.</span><span class="sxs-lookup"><span data-stu-id="1a412-217">This is logically the reverse process of matching the URL path.</span></span>

> [!TIP]
> <span data-ttu-id="1a412-218">Per comprendere meglio la generazione di URL, si pensi a quale URL si vuole generare e al modo in cui un modello di route deve corrispondere a tale URL.</span><span class="sxs-lookup"><span data-stu-id="1a412-218">To better understand URL generation, imagine what URL you want to generate and then think about how a route template would match that URL.</span></span> <span data-ttu-id="1a412-219">Quali valori devono essere prodotti?</span><span class="sxs-lookup"><span data-stu-id="1a412-219">What values would be produced?</span></span> <span data-ttu-id="1a412-220">Questo equivale approssimativamente al funzionamento della generazione di URL nella classe `Route`.</span><span class="sxs-lookup"><span data-stu-id="1a412-220">This is the rough equivalent of how URL generation works in the `Route` class.</span></span>

<span data-ttu-id="1a412-221">In questo esempio viene usata una route di base in stile ASP.NET Core MVC:</span><span class="sxs-lookup"><span data-stu-id="1a412-221">This example uses a basic ASP.NET Core MVC style route:</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home}/{action=Index}/{id?}");
```

<span data-ttu-id="1a412-222">Con i valori di route `{ controller = Products, action = List }` questa route genera l'URL `/Products/List`.</span><span class="sxs-lookup"><span data-stu-id="1a412-222">With the route values `{ controller = Products, action = List }`, this route generates the URL `/Products/List`.</span></span> <span data-ttu-id="1a412-223">I valori di route vengono sostituiti dai parametri di route corrispondenti per formare il percorso URL.</span><span class="sxs-lookup"><span data-stu-id="1a412-223">The route values are substituted for the corresponding route parameters to form the URL path.</span></span> <span data-ttu-id="1a412-224">Poiché `id` è un parametro di route facoltativo, non è un problema se non ha un valore.</span><span class="sxs-lookup"><span data-stu-id="1a412-224">Since `id` is an optional route parameter, it's no problem that it doesn't have a value.</span></span>

<span data-ttu-id="1a412-225">Con i valori di route `{ controller = Home, action = Index }` questa route genera l'URL `/`.</span><span class="sxs-lookup"><span data-stu-id="1a412-225">With the route values `{ controller = Home, action = Index }`, this route generates the URL `/`.</span></span> <span data-ttu-id="1a412-226">I valori di route specificati corrispondono ai valori predefiniti, di conseguenza i segmenti corrispondenti a tali valori possono essere omessi.</span><span class="sxs-lookup"><span data-stu-id="1a412-226">The route values that were provided match the default values so that the segments corresponding to those values can be safely omitted.</span></span> <span data-ttu-id="1a412-227">Per entrambi gli URL generati viene eseguito il round trip con questa definizione di route e vengono prodotti gli stessi valori di route usati per generare l'URL.</span><span class="sxs-lookup"><span data-stu-id="1a412-227">Both URLs generated round-trip with this route definition and produce the same route values that were used to generate the URL.</span></span>

> [!TIP]
> <span data-ttu-id="1a412-228">Un'app che usa ASP.NET Core MVC deve usare <xref:Microsoft.AspNetCore.Mvc.Routing.UrlHelper> per generare gli URL invece di eseguire la chiamata direttamente nel routing.</span><span class="sxs-lookup"><span data-stu-id="1a412-228">An app using ASP.NET Core MVC should use <xref:Microsoft.AspNetCore.Mvc.Routing.UrlHelper> to generate URLs instead of calling into routing directly.</span></span>

<span data-ttu-id="1a412-229">Per altre informazioni sulla generazione di URL, vedere [Riferimento per la generazione di URL](#url-generation-reference).</span><span class="sxs-lookup"><span data-stu-id="1a412-229">For more information about URL generation, see [url-generation-reference](#url-generation-reference).</span></span>

## <a name="use-routing-middleware"></a><span data-ttu-id="1a412-230">Usare il middleware di routing</span><span class="sxs-lookup"><span data-stu-id="1a412-230">Use Routing Middleware</span></span>

::: moniker range=">= aspnetcore-2.1"

<span data-ttu-id="1a412-231">Fare riferimento al [metapacchetto Microsoft.AspNetCore.App](xref:fundamentals/metapackage-app) nel file di progetto dell'app.</span><span class="sxs-lookup"><span data-stu-id="1a412-231">Reference the [Microsoft.AspNetCore.App metapackage](xref:fundamentals/metapackage-app) in the app's project file.</span></span>

::: moniker-end

::: moniker range="= aspnetcore-2.0"

<span data-ttu-id="1a412-232">Fare riferimento al [metapacchetto Microsoft.AspNetCore.All](xref:fundamentals/metapackage) nel file di progetto dell'app.</span><span class="sxs-lookup"><span data-stu-id="1a412-232">Reference the [Microsoft.AspNetCore.All metapackage](xref:fundamentals/metapackage) in the app's project file.</span></span>

::: moniker-end

::: moniker range="< aspnetcore-2.0"

<span data-ttu-id="1a412-233">Fare riferimento a [Microsoft.AspNetCore.Routing](https://www.nuget.org/packages/Microsoft.AspNetCore.Routing/) nel file di progetto dell'app.</span><span class="sxs-lookup"><span data-stu-id="1a412-233">Reference the [Microsoft.AspNetCore.Routing](https://www.nuget.org/packages/Microsoft.AspNetCore.Routing/) in the app's project file.</span></span>

::: moniker-end

<span data-ttu-id="1a412-234">Aggiungere il routing al contenitore del servizio in `Startup.ConfigureServices`:</span><span class="sxs-lookup"><span data-stu-id="1a412-234">Add routing to the service container in `Startup.ConfigureServices`:</span></span>

::: moniker range=">= aspnetcore-2.0"

[!code-csharp[](routing/samples/2.x/RoutingSample/Startup.cs?name=snippet_ConfigureServices&highlight=3)]

::: moniker-end

::: moniker range="< aspnetcore-2.0"

[!code-csharp[](routing/samples/1.x/RoutingSample/Startup.cs?name=snippet_ConfigureServices&highlight=3)]

::: moniker-end

<span data-ttu-id="1a412-235">Le route devono essere configurate nel metodo `Startup.Configure`.</span><span class="sxs-lookup"><span data-stu-id="1a412-235">Routes must be configured in the `Startup.Configure` method.</span></span> <span data-ttu-id="1a412-236">Nell'esempio seguente vengono usate queste API:</span><span class="sxs-lookup"><span data-stu-id="1a412-236">The sample app uses these APIs:</span></span>

* `RouteBuilder`
* `Build`
* <span data-ttu-id="1a412-237">`MapGet` &ndash; Confronta solo le richieste HTTP GET.</span><span class="sxs-lookup"><span data-stu-id="1a412-237">`MapGet` &ndash; Matches only HTTP GET requests.</span></span>
* `UseRouter`

::: moniker range=">= aspnetcore-2.0"

[!code-csharp[](routing/samples/2.x/RoutingSample/Startup.cs?name=snippet_RouteHandler)]

::: moniker-end

::: moniker range="< aspnetcore-2.0"

[!code-csharp[](routing/samples/1.x/RoutingSample/Startup.cs?name=snippet_RouteHandler)]

::: moniker-end

<span data-ttu-id="1a412-238">Nella tabella seguente sono elencate le risposte con gli URI specificati.</span><span class="sxs-lookup"><span data-stu-id="1a412-238">The following table shows the responses with the given URIs.</span></span>

| <span data-ttu-id="1a412-239">URI</span><span class="sxs-lookup"><span data-stu-id="1a412-239">URI</span></span>                  | <span data-ttu-id="1a412-240">Risposta</span><span class="sxs-lookup"><span data-stu-id="1a412-240">Response</span></span>                                          |
| -------------------- | ------------------------------------------------- |
| <span data-ttu-id="1a412-241">/package/create/3</span><span class="sxs-lookup"><span data-stu-id="1a412-241">/package/create/3</span></span>    | <span data-ttu-id="1a412-242">Hello!</span><span class="sxs-lookup"><span data-stu-id="1a412-242">Hello!</span></span> <span data-ttu-id="1a412-243">Route values: [operation, create], [id, 3]</span><span class="sxs-lookup"><span data-stu-id="1a412-243">Route values: [operation, create], [id, 3]</span></span> |
| <span data-ttu-id="1a412-244">/package/track/-3</span><span class="sxs-lookup"><span data-stu-id="1a412-244">/package/track/-3</span></span>    | <span data-ttu-id="1a412-245">Hello!</span><span class="sxs-lookup"><span data-stu-id="1a412-245">Hello!</span></span> <span data-ttu-id="1a412-246">Route values: [operation, track], [id, -3]</span><span class="sxs-lookup"><span data-stu-id="1a412-246">Route values: [operation, track], [id, -3]</span></span> |
| <span data-ttu-id="1a412-247">/package/track/-3/</span><span class="sxs-lookup"><span data-stu-id="1a412-247">/package/track/-3/</span></span>   | <span data-ttu-id="1a412-248">Hello!</span><span class="sxs-lookup"><span data-stu-id="1a412-248">Hello!</span></span> <span data-ttu-id="1a412-249">Route values: [operation, track], [id, -3]</span><span class="sxs-lookup"><span data-stu-id="1a412-249">Route values: [operation, track], [id, -3]</span></span> |
| <span data-ttu-id="1a412-250">/package/track/</span><span class="sxs-lookup"><span data-stu-id="1a412-250">/package/track/</span></span>      | <span data-ttu-id="1a412-251">&lt;Passaggio, nessuna corrispondenza&gt;</span><span class="sxs-lookup"><span data-stu-id="1a412-251">&lt;Fall through, no match&gt;</span></span>                    |
| <span data-ttu-id="1a412-252">GET /hello/Joe</span><span class="sxs-lookup"><span data-stu-id="1a412-252">GET /hello/Joe</span></span>       | <span data-ttu-id="1a412-253">Hi, Joe!</span><span class="sxs-lookup"><span data-stu-id="1a412-253">Hi, Joe!</span></span>                                          |
| <span data-ttu-id="1a412-254">POST /hello/Joe</span><span class="sxs-lookup"><span data-stu-id="1a412-254">POST /hello/Joe</span></span>      | <span data-ttu-id="1a412-255">&lt;Passaggio, corrispondenza solo con HTTP GET&gt;</span><span class="sxs-lookup"><span data-stu-id="1a412-255">&lt;Fall through, matches HTTP GET only&gt;</span></span>       |
| <span data-ttu-id="1a412-256">GET /hello/Joe/Smith</span><span class="sxs-lookup"><span data-stu-id="1a412-256">GET /hello/Joe/Smith</span></span> | <span data-ttu-id="1a412-257">&lt;Passaggio, nessuna corrispondenza&gt;</span><span class="sxs-lookup"><span data-stu-id="1a412-257">&lt;Fall through, no match&gt;</span></span>                    |

<span data-ttu-id="1a412-258">Se si sta configurando una singola route, chiamare <xref:Microsoft.AspNetCore.Builder.RoutingBuilderExtensions.UseRouter*> passando un'istanza di `IRouter`.</span><span class="sxs-lookup"><span data-stu-id="1a412-258">If you're configuring a single route, call <xref:Microsoft.AspNetCore.Builder.RoutingBuilderExtensions.UseRouter*> passing in an `IRouter` instance.</span></span> <span data-ttu-id="1a412-259">Non è necessario usare <xref:Microsoft.AspNetCore.Routing.RouteBuilder>.</span><span class="sxs-lookup"><span data-stu-id="1a412-259">You won't need to use <xref:Microsoft.AspNetCore.Routing.RouteBuilder>.</span></span>

<span data-ttu-id="1a412-260">Il framework offre un set di metodi di estensione per la creazione di route, ad esempio:</span><span class="sxs-lookup"><span data-stu-id="1a412-260">The framework provides a set of extension methods for creating routes, such as:</span></span>

* `MapRoute`
* `MapGet`
* `MapPost`
* `MapPut`
* `MapDelete`
* `MapVerb`

<span data-ttu-id="1a412-261">Con alcuni di questi metodi, ad esempio `MapGet`, è necessario specificare un elemento `RequestDelegate`.</span><span class="sxs-lookup"><span data-stu-id="1a412-261">Some of these methods, such as `MapGet`, require a `RequestDelegate` to be provided.</span></span> <span data-ttu-id="1a412-262">`RequestDelegate` viene usato come *gestore di route* quando la route corrisponde.</span><span class="sxs-lookup"><span data-stu-id="1a412-262">The `RequestDelegate` is used as the *route handler* when the route matches.</span></span> <span data-ttu-id="1a412-263">Altri metodi di questa famiglia consentono di configurare una pipeline middleware che verrà usata come gestore di route.</span><span class="sxs-lookup"><span data-stu-id="1a412-263">Other methods in this family allow configuring a middleware pipeline for use as the route handler.</span></span> <span data-ttu-id="1a412-264">Se il metodo *Map* non accetta alcun gestore, ad esempio `MapRoute`, usa <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>.</span><span class="sxs-lookup"><span data-stu-id="1a412-264">If the *Map* method doesn't accept a handler, such as `MapRoute`, then it uses the <xref:Microsoft.AspNetCore.Routing.RouteBuilder.DefaultHandler*>.</span></span>

<span data-ttu-id="1a412-265">I metodi `Map[Verb]` usano i vincoli per limitare la route al verbo HTTP nel nome del metodo.</span><span class="sxs-lookup"><span data-stu-id="1a412-265">The `Map[Verb]` methods use constraints to limit the route to the HTTP Verb in the method name.</span></span> <span data-ttu-id="1a412-266">Vedere ad esempio <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*> e <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapVerb*>.</span><span class="sxs-lookup"><span data-stu-id="1a412-266">For example, see <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapGet*> and <xref:Microsoft.AspNetCore.Routing.RequestDelegateRouteBuilderExtensions.MapVerb*>.</span></span>

## <a name="route-template-reference"></a><span data-ttu-id="1a412-267">Riferimento per il modello di route</span><span class="sxs-lookup"><span data-stu-id="1a412-267">Route template reference</span></span>

<span data-ttu-id="1a412-268">I token all'interno di parentesi graffe (`{ ... }`) definiscono i *parametri di route* che vengono associati se esiste una corrispondenza per la route.</span><span class="sxs-lookup"><span data-stu-id="1a412-268">Tokens within curly braces (`{ ... }`) define *route parameters* that are bound if the route is matched.</span></span> <span data-ttu-id="1a412-269">È possibile definire più parametri di route in un segmento di route, ma devono essere separati da un valore letterale.</span><span class="sxs-lookup"><span data-stu-id="1a412-269">You can define more than one route parameter in a route segment, but they must be separated by a literal value.</span></span> <span data-ttu-id="1a412-270">Ad esempio, `{controller=Home}{action=Index}` non è una route valida perché non è presente un valore letterale tra `{controller}` e `{action}`.</span><span class="sxs-lookup"><span data-stu-id="1a412-270">For example, `{controller=Home}{action=Index}` isn't a valid route, since there's no literal value between `{controller}` and `{action}`.</span></span> <span data-ttu-id="1a412-271">Questi parametri di route devono avere un nome e possono avere attributi aggiuntivi.</span><span class="sxs-lookup"><span data-stu-id="1a412-271">These route parameters must have a name and may have additional attributes specified.</span></span>

<span data-ttu-id="1a412-272">Il testo letterale diverso dai parametri di route, ad esempio `{id}`, e il separatore di percorso `/` devono corrispondere al testo nell'URL.</span><span class="sxs-lookup"><span data-stu-id="1a412-272">Literal text other than route parameters (for example, `{id}`) and the path separator `/` must match the text in the URL.</span></span> <span data-ttu-id="1a412-273">La corrispondenza del testo non fa distinzione tra maiuscole e minuscole e si basa sulla rappresentazione decodificata del percorso degli URL.</span><span class="sxs-lookup"><span data-stu-id="1a412-273">Text matching is case-insensitive and based on the decoded representation of the URLs path.</span></span> <span data-ttu-id="1a412-274">Per verificare la corrispondenza del delimitatore letterale dei parametri di route `{` o `}`, eseguirne l'escape ripetendo il carattere (`{{` o `}}`).</span><span class="sxs-lookup"><span data-stu-id="1a412-274">To match the literal route parameter delimiter `{` or  `}`, escape it by repeating the character (`{{` or `}}`).</span></span>

<span data-ttu-id="1a412-275">I modelli di URL che tentano di acquisire un nome file con un'estensione facoltativa usano considerazioni aggiuntive.</span><span class="sxs-lookup"><span data-stu-id="1a412-275">URL patterns that attempt to capture a filename with an optional file extension have additional considerations.</span></span> <span data-ttu-id="1a412-276">Considerare ad esempio il modello `files/{filename}.{ext?}`.</span><span class="sxs-lookup"><span data-stu-id="1a412-276">For example, consider the template `files/{filename}.{ext?}`.</span></span> <span data-ttu-id="1a412-277">Se esistono sia `filename` che `ext`, vengono popolati entrambi i valori.</span><span class="sxs-lookup"><span data-stu-id="1a412-277">When both `filename` and `ext` exist, both values are populated.</span></span> <span data-ttu-id="1a412-278">Se esiste solo `filename` nell'URL, la route corrisponde perché il punto finale `.` è facoltativo.</span><span class="sxs-lookup"><span data-stu-id="1a412-278">If only `filename` exists in the URL, the route matches because the trailing period `.` is  optional.</span></span> <span data-ttu-id="1a412-279">Gli URL seguenti corrispondono a questa route:</span><span class="sxs-lookup"><span data-stu-id="1a412-279">The following URLs match this route:</span></span>

* `/files/myFile.txt`
* `/files/myFile`

<span data-ttu-id="1a412-280">È possibile usare il carattere `*` come prefisso per un parametro di route da associare al resto dell'URI,</span><span class="sxs-lookup"><span data-stu-id="1a412-280">You can use the `*` character as a prefix to a route parameter to bind to the rest of the URI.</span></span> <span data-ttu-id="1a412-281">ovvero un parametro *catch-all*.</span><span class="sxs-lookup"><span data-stu-id="1a412-281">This is called a *catch-all* parameter.</span></span> <span data-ttu-id="1a412-282">Ad esempio, `blog/{*slug}` corrisponde a qualsiasi URI che inizia con `/blog` seguito da qualsiasi valore (che viene assegnato al valore di route `slug`).</span><span class="sxs-lookup"><span data-stu-id="1a412-282">For example, `blog/{*slug}` matches any URI that starts with `/blog` and had any value following it (which is assigned to the `slug` route value).</span></span> <span data-ttu-id="1a412-283">I parametri catch-all possono anche corrispondere alla stringa vuota.</span><span class="sxs-lookup"><span data-stu-id="1a412-283">Catch-all parameters can also match the empty string.</span></span>

::: moniker range=">= aspnetcore-2.2"

<span data-ttu-id="1a412-284">Il parametro catch-all esegue l'escape dei caratteri appropriati, incluso il separatore di percorso (`/`), quando la route viene usata per generare un URL.</span><span class="sxs-lookup"><span data-stu-id="1a412-284">The catch-all parameter escapes the appropriate characters when the route is used to generate a URL, including path separator (`/`) characters.</span></span> <span data-ttu-id="1a412-285">Ad esempio, la route `foo/{*path}` con i valori di route `{ path = "my/path" }` genera `foo/my%2Fpath`.</span><span class="sxs-lookup"><span data-stu-id="1a412-285">For example, the route `foo/{*path}` with route values `{ path = "my/path" }` generates `foo/my%2Fpath`.</span></span> <span data-ttu-id="1a412-286">Si noti la barra di escape.</span><span class="sxs-lookup"><span data-stu-id="1a412-286">Note the escaped forward slash.</span></span> <span data-ttu-id="1a412-287">Per eseguire il round trip dei caratteri di separatore di percorso, usare il prefisso del parametro di route `**`.</span><span class="sxs-lookup"><span data-stu-id="1a412-287">To round-trip path separator characters, use the `**` route parameter prefix.</span></span> <span data-ttu-id="1a412-288">La route `foo/{**path}` con `{ path = "my/path" }` genera `foo/my/path`.</span><span class="sxs-lookup"><span data-stu-id="1a412-288">The route `foo/{**path}` with `{ path = "my/path" }` generates `foo/my/path`.</span></span>

::: moniker-end

<span data-ttu-id="1a412-289">I parametri di route possono avere *valori predefiniti*, definiti specificando il valore predefinito dopo il nome del parametro, separato da un segno di uguale (`=`).</span><span class="sxs-lookup"><span data-stu-id="1a412-289">Route parameters may have *default values*, designated by specifying the default after the parameter name, separated by an equals sign (`=`).</span></span> <span data-ttu-id="1a412-290">Ad esempio, `{controller=Home}` definisce `Home` come valore predefinito per `controller`.</span><span class="sxs-lookup"><span data-stu-id="1a412-290">For example, `{controller=Home}` defines `Home` as the default value for `controller`.</span></span> <span data-ttu-id="1a412-291">Il valore predefinito viene usato se nell'URL non è presente alcun valore per il parametro.</span><span class="sxs-lookup"><span data-stu-id="1a412-291">The default value is used if no value is present in the URL for the parameter.</span></span> <span data-ttu-id="1a412-292">Oltre ai valori predefiniti, i parametri di route possono essere facoltativi, specificati aggiungendo un punto interrogativo (`?`) alla fine del nome del parametro, come in `id?`.</span><span class="sxs-lookup"><span data-stu-id="1a412-292">In addition to default values, route parameters may be optional, specified by appending a question mark (`?`) to the end of the parameter name, as in `id?`.</span></span> <span data-ttu-id="1a412-293">La differenza tra parametri facoltativi e parametri di route predefiniti è che un parametro di route con un valore predefinito produce sempre un valore, mentre un parametro facoltativo ha un valore solo se ne viene specificato uno dall'URL della richiesta.</span><span class="sxs-lookup"><span data-stu-id="1a412-293">The difference between optional values and default route parameters is that a route parameter with a default value always produces a value; an optional parameter has a value only when a value is provided by the request URL.</span></span>

::: moniker range=">= aspnetcore-2.2"

<span data-ttu-id="1a412-294">I parametri di route possono presentare dei vincoli, che devono corrispondere al valore di route associato dall'URL.</span><span class="sxs-lookup"><span data-stu-id="1a412-294">Route parameters may have constraints, which must match the route value bound from the URL.</span></span> <span data-ttu-id="1a412-295">Aggiungendo due punti (`:`) e il nome del vincolo dopo il nome del parametro di route, si specifica un *vincolo inline* per un parametro di route.</span><span class="sxs-lookup"><span data-stu-id="1a412-295">Adding a colon (`:`) and constraint name after the route parameter name specifies an *inline constraint* on a route parameter.</span></span> <span data-ttu-id="1a412-296">Se il vincolo richiede argomenti, vengono racchiusi tra parentesi `( )` dopo il nome del vincolo.</span><span class="sxs-lookup"><span data-stu-id="1a412-296">If the constraint requires arguments, they're enclosed in parentheses `( )` after the constraint name.</span></span> <span data-ttu-id="1a412-297">È possibile specificare più vincoli inline aggiungendo di nuovo i due punti (`:`) e il nome del vincolo.</span><span class="sxs-lookup"><span data-stu-id="1a412-297">Multiple inline constraints can be specified by appending another colon (`:`) and constraint name.</span></span> <span data-ttu-id="1a412-298">Il nome del vincolo e gli argomenti vengono passati al servizio <xref:Microsoft.AspNetCore.Routing.IInlineConstraintResolver> per creare un'istanza di <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> da usare nell'elaborazione dell'URL.</span><span class="sxs-lookup"><span data-stu-id="1a412-298">The constraint name and arguments are passed to the <xref:Microsoft.AspNetCore.Routing.IInlineConstraintResolver> service to create an instance of <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> to use in URL processing.</span></span> <span data-ttu-id="1a412-299">Se per il costruttore del vincolo sono necessari servizi, questi vengono risolti dai servizi app dell'inserimento delle dipendenze.</span><span class="sxs-lookup"><span data-stu-id="1a412-299">If the constraint constructor requires services, they're resolved from dependency injection's app services.</span></span> <span data-ttu-id="1a412-300">Il modello di route `blog/{article:minlength(10)}` specifica ad esempio un vincolo `minlength` con l'argomento `10`.</span><span class="sxs-lookup"><span data-stu-id="1a412-300">For example, the route template `blog/{article:minlength(10)}` specifies a `minlength` constraint with the argument `10`.</span></span> <span data-ttu-id="1a412-301">Per altre informazioni sui vincoli di route e per un elenco dei vincoli specificati dal framework, vedere la sezione [Riferimento per i vincoli di route](#route-constraint-reference).</span><span class="sxs-lookup"><span data-stu-id="1a412-301">For more information on route constraints and a listing of the constraints provided by the framework, see the [Route constraint reference](#route-constraint-reference) section.</span></span>

::: moniker-end

::: moniker range="< aspnetcore-2.2"

<span data-ttu-id="1a412-302">I parametri di route possono presentare dei vincoli, che devono corrispondere al valore di route associato dall'URL.</span><span class="sxs-lookup"><span data-stu-id="1a412-302">Route parameters may have constraints, which must match the route value bound from the URL.</span></span> <span data-ttu-id="1a412-303">Aggiungendo due punti (`:`) e il nome del vincolo dopo il nome del parametro di route, si specifica un *vincolo inline* per un parametro di route.</span><span class="sxs-lookup"><span data-stu-id="1a412-303">Adding a colon (`:`) and constraint name after the route parameter name specifies an *inline constraint* on a route parameter.</span></span> <span data-ttu-id="1a412-304">Se il vincolo richiede argomenti, vengono racchiusi tra parentesi `( )` dopo il nome del vincolo.</span><span class="sxs-lookup"><span data-stu-id="1a412-304">If the constraint requires arguments, they're enclosed in parentheses `( )` after the constraint name.</span></span> <span data-ttu-id="1a412-305">È possibile specificare più vincoli inline aggiungendo di nuovo i due punti (`:`) e il nome del vincolo.</span><span class="sxs-lookup"><span data-stu-id="1a412-305">Multiple inline constraints can be specified by appending another colon (`:`) and constraint name.</span></span> <span data-ttu-id="1a412-306">Il nome del vincolo e gli argomenti vengono passati al servizio <xref:Microsoft.AspNetCore.Routing.IInlineConstraintResolver> per creare un'istanza di <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> da usare nell'elaborazione dell'URL.</span><span class="sxs-lookup"><span data-stu-id="1a412-306">The constraint name and arguments are passed to the <xref:Microsoft.AspNetCore.Routing.IInlineConstraintResolver> service to create an instance of <xref:Microsoft.AspNetCore.Routing.IRouteConstraint> to use in URL processing.</span></span> <span data-ttu-id="1a412-307">Il modello di route `blog/{article:minlength(10)}` specifica ad esempio un vincolo `minlength` con l'argomento `10`.</span><span class="sxs-lookup"><span data-stu-id="1a412-307">For example, the route template `blog/{article:minlength(10)}` specifies a `minlength` constraint with the argument `10`.</span></span> <span data-ttu-id="1a412-308">Per altre informazioni sui vincoli di route e per un elenco dei vincoli specificati dal framework, vedere la sezione [Riferimento per i vincoli di route](#route-constraint-reference).</span><span class="sxs-lookup"><span data-stu-id="1a412-308">For more information on route constraints and a listing of the constraints provided by the framework, see the [Route constraint reference](#route-constraint-reference) section.</span></span>

::: moniker-end

::: moniker range=">= aspnetcore-2.2"

<span data-ttu-id="1a412-309">I parametri di route possono avere anche trasformatori di parametro, che trasformano un valore di parametro durante la generazione dei collegamenti e l'abbinamento delle azioni e delle pagine agli URI.</span><span class="sxs-lookup"><span data-stu-id="1a412-309">Route parameters may also have parameter transformers, which transform a parameter's value when generating links and matching actions and pages to URIs.</span></span> <span data-ttu-id="1a412-310">Come i vincoli, i trasformatori di parametro possono essere aggiunti inline a un parametro di route inserendo due punti (`:`) e il nome del trasformatore dopo il nome del parametro di route.</span><span class="sxs-lookup"><span data-stu-id="1a412-310">Like constraints, parameter transformers can be added inline to a route parameter by adding a colon (`:`) and transformer name after the route parameter name.</span></span> <span data-ttu-id="1a412-311">Ad esempio, il modello di route `blog/{article:slugify}` specifica un trasformatore `slugify`.</span><span class="sxs-lookup"><span data-stu-id="1a412-311">For example, the route template `blog/{article:slugify}` specifies a `slugify` transformer.</span></span>

::: moniker-end

<span data-ttu-id="1a412-312">La tabella seguente illustra alcuni modelli di route con il relativo comportamento.</span><span class="sxs-lookup"><span data-stu-id="1a412-312">The following table demonstrates some route templates and their behavior.</span></span>

| <span data-ttu-id="1a412-313">Modello di route</span><span class="sxs-lookup"><span data-stu-id="1a412-313">Route Template</span></span>                         | <span data-ttu-id="1a412-314">Esempio di URL corrispondente</span><span class="sxs-lookup"><span data-stu-id="1a412-314">Example Matching URL</span></span>  | <span data-ttu-id="1a412-315">Note</span><span class="sxs-lookup"><span data-stu-id="1a412-315">Notes</span></span>                                                                  |
| -------------------------------------- | --------------------- | ---------------------------------------------------------------------- |
| <span data-ttu-id="1a412-316">hello</span><span class="sxs-lookup"><span data-stu-id="1a412-316">hello</span></span>                                  | <span data-ttu-id="1a412-317">/hello</span><span class="sxs-lookup"><span data-stu-id="1a412-317">/hello</span></span>                | <span data-ttu-id="1a412-318">Verifica la corrispondenza solo del singolo percorso `/hello`</span><span class="sxs-lookup"><span data-stu-id="1a412-318">Only matches the single path `/hello`</span></span>                                  |
| <span data-ttu-id="1a412-319">{Page=Home}</span><span class="sxs-lookup"><span data-stu-id="1a412-319">{Page=Home}</span></span>                            | /                     | <span data-ttu-id="1a412-320">Verifica la corrispondenza e imposta `Page` su `Home`</span><span class="sxs-lookup"><span data-stu-id="1a412-320">Matches and sets `Page` to `Home`</span></span>                                      |
| <span data-ttu-id="1a412-321">{Page=Home}</span><span class="sxs-lookup"><span data-stu-id="1a412-321">{Page=Home}</span></span>                            | <span data-ttu-id="1a412-322">/Contact</span><span class="sxs-lookup"><span data-stu-id="1a412-322">/Contact</span></span>              | <span data-ttu-id="1a412-323">Verifica la corrispondenza e imposta `Page` su `Contact`</span><span class="sxs-lookup"><span data-stu-id="1a412-323">Matches and sets `Page` to `Contact`</span></span>                                   |
| <span data-ttu-id="1a412-324">{controller}/{action}/{id?}</span><span class="sxs-lookup"><span data-stu-id="1a412-324">{controller}/{action}/{id?}</span></span>            | <span data-ttu-id="1a412-325">/Products/List</span><span class="sxs-lookup"><span data-stu-id="1a412-325">/Products/List</span></span>        | <span data-ttu-id="1a412-326">Esegue il mapping al controller `Products` e all'azione `List`</span><span class="sxs-lookup"><span data-stu-id="1a412-326">Maps to `Products` controller and `List`  action</span></span>                       |
| <span data-ttu-id="1a412-327">{controller}/{action}/{id?}</span><span class="sxs-lookup"><span data-stu-id="1a412-327">{controller}/{action}/{id?}</span></span>            | <span data-ttu-id="1a412-328">/Products/Details/123</span><span class="sxs-lookup"><span data-stu-id="1a412-328">/Products/Details/123</span></span> |  <span data-ttu-id="1a412-329">Esegue il mapping al controller `Products` e all'azione `Details`.</span><span class="sxs-lookup"><span data-stu-id="1a412-329">Maps to `Products` controller and  `Details` action.</span></span>  <span data-ttu-id="1a412-330">`id` impostato su 123</span><span class="sxs-lookup"><span data-stu-id="1a412-330">`id` set to 123</span></span> |
| <span data-ttu-id="1a412-331">{controller=Home}/{action=Index}/{id?}</span><span class="sxs-lookup"><span data-stu-id="1a412-331">{controller=Home}/{action=Index}/{id?}</span></span> | /                     |  <span data-ttu-id="1a412-332">Esegue il mapping al controller `Home` e al metodo `Index`; `id` viene ignorato.</span><span class="sxs-lookup"><span data-stu-id="1a412-332">Maps to `Home` controller and `Index`  method; `id` is ignored.</span></span>       |

<span data-ttu-id="1a412-333">L'uso di un modello è in genere l'approccio più semplice al routing.</span><span class="sxs-lookup"><span data-stu-id="1a412-333">Using a template is generally the simplest approach to routing.</span></span> <span data-ttu-id="1a412-334">I vincoli e le impostazioni predefinite possono essere specificati anche all'esterno del modello di route.</span><span class="sxs-lookup"><span data-stu-id="1a412-334">Constraints and defaults can also be specified outside the route template.</span></span>

> [!TIP]
> <span data-ttu-id="1a412-335">Abilitare la [registrazione](xref:fundamentals/logging/index) per vedere in che modo le implementazioni del routing, ad esempio `Route`, corrispondono alle richieste.</span><span class="sxs-lookup"><span data-stu-id="1a412-335">Enable [Logging](xref:fundamentals/logging/index) to see how the built in routing implementations, such as `Route`, match requests.</span></span>

## <a name="reserved-routing-names"></a><span data-ttu-id="1a412-336">Nomi riservati di routing</span><span class="sxs-lookup"><span data-stu-id="1a412-336">Reserved routing names</span></span>

<span data-ttu-id="1a412-337">Le parole chiave seguenti sono nomi riservati e non possono essere usate come nomi o parametri di route:</span><span class="sxs-lookup"><span data-stu-id="1a412-337">The following keywords are reserved names and can't be used as route names or parameters:</span></span>

* `action`
* `area`
* `controller`
* `handler`
* `page`

## <a name="route-constraint-reference"></a><span data-ttu-id="1a412-338">Riferimento per i vincoli di route</span><span class="sxs-lookup"><span data-stu-id="1a412-338">Route constraint reference</span></span>

<span data-ttu-id="1a412-339">I vincoli di route vengono eseguiti quando una `Route` corrisponde alla sintassi dell'URL in ingresso e suddivide il percorso URL in valori di route in formato token.</span><span class="sxs-lookup"><span data-stu-id="1a412-339">Route constraints execute when a `Route` has matched the syntax of the incoming URL and tokenized the URL path into route values.</span></span> <span data-ttu-id="1a412-340">I vincoli di route in genere controllano il valore di route associato usando il modello di route e stabiliscono con una decisione Sì/No se il valore è accettabile o meno.</span><span class="sxs-lookup"><span data-stu-id="1a412-340">Route constraints generally inspect the route value associated via the route template and make a yes/no decision about whether or not the value is acceptable.</span></span> <span data-ttu-id="1a412-341">Alcuni vincoli di route usano i dati all'esterno del valore di route per stabilire se la richiesta può essere instradata.</span><span class="sxs-lookup"><span data-stu-id="1a412-341">Some route constraints use data outside the route value to consider whether the request can be routed.</span></span> <span data-ttu-id="1a412-342">Ad esempio, <xref:Microsoft.AspNetCore.Routing.Constraints.HttpMethodRouteConstraint> può accettare o rifiutare una richiesta in base al relativo verbo HTTP.</span><span class="sxs-lookup"><span data-stu-id="1a412-342">For example, the <xref:Microsoft.AspNetCore.Routing.Constraints.HttpMethodRouteConstraint> can accept or reject a request based on its HTTP verb.</span></span>

> [!WARNING]
> <span data-ttu-id="1a412-343">Evitare l'uso di vincoli per la **convalida dell'input** perché un input non valido causa la visualizzazione di un errore di tipo *404 (Non trovato)* invece di un errore di tipo *400 - Richiesta non valida* con un messaggio di errore appropriato.</span><span class="sxs-lookup"><span data-stu-id="1a412-343">Avoid using constraints for **input validation** because doing so means that invalid input results in a *404 - Not Found* response instead of a *400 - Bad Request* with an appropriate error message.</span></span> <span data-ttu-id="1a412-344">I vincoli di route vengono usati per evitare **ambiguità** tra route simili, non per convalidare gli input per una route specifica.</span><span class="sxs-lookup"><span data-stu-id="1a412-344">Route constraints are used to **disambiguate** between similar routes, not to validate the inputs for a particular route.</span></span>

<span data-ttu-id="1a412-345">La tabella seguente illustra alcuni vincoli di route con il relativo comportamento.</span><span class="sxs-lookup"><span data-stu-id="1a412-345">The following table demonstrates some route constraints and their expected behavior.</span></span>

| <span data-ttu-id="1a412-346">vincolo</span><span class="sxs-lookup"><span data-stu-id="1a412-346">constraint</span></span> | <span data-ttu-id="1a412-347">Esempio</span><span class="sxs-lookup"><span data-stu-id="1a412-347">Example</span></span> | <span data-ttu-id="1a412-348">Esempi di corrispondenza</span><span class="sxs-lookup"><span data-stu-id="1a412-348">Example Matches</span></span> | <span data-ttu-id="1a412-349">Note</span><span class="sxs-lookup"><span data-stu-id="1a412-349">Notes</span></span> |
| ---------- | ------- | --------------- | ----- |
| `int` | `{id:int}` | <span data-ttu-id="1a412-350">`123456789`, `-123456789`</span><span class="sxs-lookup"><span data-stu-id="1a412-350">`123456789`, `-123456789`</span></span>  | <span data-ttu-id="1a412-351">Corrisponde a qualsiasi numero intero</span><span class="sxs-lookup"><span data-stu-id="1a412-351">Matches any integer</span></span> |
| `bool` | `{active:bool}` | <span data-ttu-id="1a412-352">`true`, `FALSE`</span><span class="sxs-lookup"><span data-stu-id="1a412-352">`true`, `FALSE`</span></span> | <span data-ttu-id="1a412-353">Corrisponde a `true` o `false` (senza distinzione tra maiuscole e minuscole)</span><span class="sxs-lookup"><span data-stu-id="1a412-353">Matches `true` or `false` (case-insensitive)</span></span> |
| `datetime` | `{dob:datetime}` | <span data-ttu-id="1a412-354">`2016-12-31`, `2016-12-31 7:32pm`</span><span class="sxs-lookup"><span data-stu-id="1a412-354">`2016-12-31`, `2016-12-31 7:32pm`</span></span>  | <span data-ttu-id="1a412-355">Corrisponde a un valore `DateTime` valido (impostazioni cultura inglese non dipendenti da paese/area geografica, vedere avviso)</span><span class="sxs-lookup"><span data-stu-id="1a412-355">Matches a valid `DateTime` value (in the invariant culture - see warning)</span></span> |
| `decimal` | `{price:decimal}` | <span data-ttu-id="1a412-356">`49.99`, `-1,000.01`</span><span class="sxs-lookup"><span data-stu-id="1a412-356">`49.99`, `-1,000.01`</span></span> | <span data-ttu-id="1a412-357">Corrisponde a un valore `decimal` valido (impostazioni cultura inglese non dipendenti da paese/area geografica, vedere avviso)</span><span class="sxs-lookup"><span data-stu-id="1a412-357">Matches a valid `decimal` value (in the invariant culture - see warning)</span></span> |
| `double` | `{weight:double}` | <span data-ttu-id="1a412-358">`1.234`, `-1,001.01e8`</span><span class="sxs-lookup"><span data-stu-id="1a412-358">`1.234`, `-1,001.01e8`</span></span> | <span data-ttu-id="1a412-359">Corrisponde a un valore `double` valido (impostazioni cultura inglese non dipendenti da paese/area geografica, vedere avviso)</span><span class="sxs-lookup"><span data-stu-id="1a412-359">Matches a valid `double` value (in the invariant culture - see warning)</span></span> |
| `float` | `{weight:float}` | <span data-ttu-id="1a412-360">`1.234`, `-1,001.01e8`</span><span class="sxs-lookup"><span data-stu-id="1a412-360">`1.234`, `-1,001.01e8`</span></span> | <span data-ttu-id="1a412-361">Corrisponde a un valore `float` valido (impostazioni cultura inglese non dipendenti da paese/area geografica, vedere avviso)</span><span class="sxs-lookup"><span data-stu-id="1a412-361">Matches a valid `float` value (in the invariant culture - see warning)</span></span> |
| `guid` | `{id:guid}` | <span data-ttu-id="1a412-362">`CD2C1638-1638-72D5-1638-DEADBEEF1638`, `{CD2C1638-1638-72D5-1638-DEADBEEF1638}`</span><span class="sxs-lookup"><span data-stu-id="1a412-362">`CD2C1638-1638-72D5-1638-DEADBEEF1638`, `{CD2C1638-1638-72D5-1638-DEADBEEF1638}`</span></span> | <span data-ttu-id="1a412-363">Corrisponde a un valore `Guid` valido</span><span class="sxs-lookup"><span data-stu-id="1a412-363">Matches a valid `Guid` value</span></span> |
| `long` | `{ticks:long}` | <span data-ttu-id="1a412-364">`123456789`, `-123456789`</span><span class="sxs-lookup"><span data-stu-id="1a412-364">`123456789`, `-123456789`</span></span> | <span data-ttu-id="1a412-365">Corrisponde a un valore `long` valido</span><span class="sxs-lookup"><span data-stu-id="1a412-365">Matches a valid `long` value</span></span> |
| `minlength(value)` | `{username:minlength(4)}` | `Rick` | <span data-ttu-id="1a412-366">La stringa deve contenere almeno 4 caratteri</span><span class="sxs-lookup"><span data-stu-id="1a412-366">String must be at least 4 characters</span></span> |
| `maxlength(value)` | `{filename:maxlength(8)}` | `Richard` | <span data-ttu-id="1a412-367">La stringa non deve contenere più di 8 caratteri</span><span class="sxs-lookup"><span data-stu-id="1a412-367">String must be no more than 8 characters</span></span> |
| `length(length)` | `{filename:length(12)}` | `somefile.txt` | <span data-ttu-id="1a412-368">La stringa deve contenere esattamente 12 caratteri</span><span class="sxs-lookup"><span data-stu-id="1a412-368">String must be exactly 12 characters long</span></span> |
| `length(min,max)` | `{filename:length(8,16)}` | `somefile.txt` | <span data-ttu-id="1a412-369">La stringa deve contenere almeno 8 e non più di 16 caratteri</span><span class="sxs-lookup"><span data-stu-id="1a412-369">String must be at least 8 and no more than 16 characters long</span></span> |
| `min(value)` | `{age:min(18)}` | `19` | <span data-ttu-id="1a412-370">Il valore intero deve essere almeno 18</span><span class="sxs-lookup"><span data-stu-id="1a412-370">Integer value must be at least 18</span></span> |
| `max(value)` | `{age:max(120)}` | `91` | <span data-ttu-id="1a412-371">Il valore intero non deve essere superiore a 120</span><span class="sxs-lookup"><span data-stu-id="1a412-371">Integer value must be no more than 120</span></span> |
| `range(min,max)` | `{age:range(18,120)}` | `91` | <span data-ttu-id="1a412-372">Il valore intero deve essere almeno 18 ma non più di 120</span><span class="sxs-lookup"><span data-stu-id="1a412-372">Integer value must be at least 18 but no more than 120</span></span> |
| `alpha` | `{name:alpha}` | `Rick` | <span data-ttu-id="1a412-373">La stringa deve essere costituita da uno o più caratteri alfabetici (`a`-`z`, senza distinzione tra maiuscole e minuscole)</span><span class="sxs-lookup"><span data-stu-id="1a412-373">String must consist of one or more alphabetical characters (`a`-`z`, case-insensitive)</span></span> |
| `regex(expression)` | `{ssn:regex(^\\d{{3}}-\\d{{2}}-\\d{{4}}$)}` | `123-45-6789` | <span data-ttu-id="1a412-374">La stringa deve corrispondere all'espressione regolare (vedere i suggerimenti per la definizione di un'espressione regolare)</span><span class="sxs-lookup"><span data-stu-id="1a412-374">String must match the regular expression (see tips about defining a regular expression)</span></span> |
| `required` | `{name:required}` | `Rick` |  <span data-ttu-id="1a412-375">Usato per imporre che un valore diverso da un parametro sia presente durante la generazione dell'URL</span><span class="sxs-lookup"><span data-stu-id="1a412-375">Used to enforce that a non-parameter value is present during URL generation</span></span> |

<span data-ttu-id="1a412-376">Più vincoli delimitati da punti possono essere applicati a un singolo parametro.</span><span class="sxs-lookup"><span data-stu-id="1a412-376">Multiple, colon-delimited constraints can be applied to a single parameter.</span></span> <span data-ttu-id="1a412-377">Ad esempio il vincolo seguente limita un parametro a un valore intero maggiore o uguale a 1:</span><span class="sxs-lookup"><span data-stu-id="1a412-377">For example, the following constraint restricts a parameter to an integer value of 1 or greater:</span></span>

```csharp
[Route("users/{id:int:min(1)}")]
public User GetUserById(int id) { }
```

> [!WARNING]
> <span data-ttu-id="1a412-378">I vincoli di route che verificano l'URL e vengono convertiti in un tipo CLR, ad esempio `int` o `DateTime`, usano sempre le impostazioni cultura inglese non dipendenti da paese/area geografica,</span><span class="sxs-lookup"><span data-stu-id="1a412-378">Route constraints that verify the URL and are converted to a CLR type (such as `int` or `DateTime`) always use the invariant culture.</span></span> <span data-ttu-id="1a412-379">presupponendo che l'URL sia non localizzabile.</span><span class="sxs-lookup"><span data-stu-id="1a412-379">These constraints assume that the URL is non-localizable.</span></span> <span data-ttu-id="1a412-380">I vincoli di route specificati dal framework non modificano i valori archiviati nei valori di route.</span><span class="sxs-lookup"><span data-stu-id="1a412-380">The framework-provided route constraints don't modify the values stored in route values.</span></span> <span data-ttu-id="1a412-381">Tutti i valori di route analizzati dall'URL vengono archiviati come stringhe.</span><span class="sxs-lookup"><span data-stu-id="1a412-381">All route values parsed from the URL are stored as strings.</span></span> <span data-ttu-id="1a412-382">Ad esempio, il vincolo `float` prova a convertire il valore di route in un valore float, ma il valore convertito viene usato solo per verificare che può essere convertito in un valore float.</span><span class="sxs-lookup"><span data-stu-id="1a412-382">For example, the `float` constraint attempts to convert the route value to a float, but the converted value is used only to verify it can be converted to a float.</span></span>

## <a name="regular-expressions"></a><span data-ttu-id="1a412-383">Espressioni regolari</span><span class="sxs-lookup"><span data-stu-id="1a412-383">Regular expressions</span></span>

<span data-ttu-id="1a412-384">Il framework di ASP.NET Core aggiunge `RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant` al costruttore di espressioni regolari.</span><span class="sxs-lookup"><span data-stu-id="1a412-384">The ASP.NET Core framework adds `RegexOptions.IgnoreCase | RegexOptions.Compiled | RegexOptions.CultureInvariant` to the regular expression constructor.</span></span> <span data-ttu-id="1a412-385">Per una descrizione di questi membri, vedere <xref:System.Text.RegularExpressions.RegexOptions>.</span><span class="sxs-lookup"><span data-stu-id="1a412-385">See <xref:System.Text.RegularExpressions.RegexOptions> for a description of these members.</span></span>

<span data-ttu-id="1a412-386">Le espressioni regolari usano delimitatori e token simili a quelli usati dal routing e dal linguaggio C#.</span><span class="sxs-lookup"><span data-stu-id="1a412-386">Regular expressions use delimiters and tokens similar to those used by Routing and the C# language.</span></span> <span data-ttu-id="1a412-387">Per i token di espressione è necessario aggiungere caratteri di escape.</span><span class="sxs-lookup"><span data-stu-id="1a412-387">Regular expression tokens must be escaped.</span></span> <span data-ttu-id="1a412-388">Per usare l'espressione regolare `^\d{3}-\d{2}-\d{4}$` nel routing, digitare i caratteri `\` come `\\` nel file di origine C# per eseguire l'escape del carattere di escape `\` della stringa, a meno che non si usino [valori letterali stringa verbatim](/dotnet/csharp/language-reference/keywords/string).</span><span class="sxs-lookup"><span data-stu-id="1a412-388">To use the regular expression `^\d{3}-\d{2}-\d{4}$` in Routing, the expression must have the `\` characters typed in as `\\` in the C# source file to escape the `\` string escape character (unless using [verbatim string literals](/dotnet/csharp/language-reference/keywords/string).</span></span> <span data-ttu-id="1a412-389">È necessario raddoppiare i caratteri `{`, `}`, `[` e `]` per eseguire l'escape dei caratteri di delimitazione dei parametri di routing.</span><span class="sxs-lookup"><span data-stu-id="1a412-389">The `{`, `}`, `[`, and `]` characters must be escaped by doubling them to escape the Routing parameter delimiter characters.</span></span> <span data-ttu-id="1a412-390">Nella tabella che segue sono riportate due espressioni regolari con la relativa versione dopo l'escape.</span><span class="sxs-lookup"><span data-stu-id="1a412-390">The table below shows a regular expression and the escaped version.</span></span>

| <span data-ttu-id="1a412-391">Espressione</span><span class="sxs-lookup"><span data-stu-id="1a412-391">Expression</span></span>            | <span data-ttu-id="1a412-392">Con caratteri di escape</span><span class="sxs-lookup"><span data-stu-id="1a412-392">Escaped</span></span>                        |
| --------------------- | ------------------------------ |
| `^\d{3}-\d{2}-\d{4}$` | `^\\d{{3}}-\\d{{2}}-\\d{{4}}$` |
| `^[a-z]{2}$`          | `^[[a-z]]{{2}}$`               |

<span data-ttu-id="1a412-393">Le espressioni regolari usate nel routing spesso iniziano con il carattere `^` (corrispondenza con la posizione iniziale della stringa) e terminano con il carattere `$` (corrispondenza con la posizione finale della stringa).</span><span class="sxs-lookup"><span data-stu-id="1a412-393">Regular expressions used in routing often start with the `^` character (match starting position of the string) and end with the `$` character (match ending position of the string).</span></span> <span data-ttu-id="1a412-394">I caratteri `^` e `$` consentono di verificare che l'espressione regolare corrisponda all'intero valore del parametro di route.</span><span class="sxs-lookup"><span data-stu-id="1a412-394">The `^` and `$` characters ensure that the regular expression match the entire route parameter value.</span></span> <span data-ttu-id="1a412-395">Senza i caratteri `^` e `$` l'espressione regolare corrisponde a qualsiasi sottostringa all'interno della stringa e spesso questo non è il risultato desiderato.</span><span class="sxs-lookup"><span data-stu-id="1a412-395">Without the `^` and `$` characters, the regular expression match any substring within the string, which is often undesirable.</span></span> <span data-ttu-id="1a412-396">La tabella seguente illustra alcuni esempi e spiega perché si verifica o non si verifica la corrispondenza.</span><span class="sxs-lookup"><span data-stu-id="1a412-396">The table below shows some examples and explains why they match or fail to match.</span></span>

| <span data-ttu-id="1a412-397">Espressione</span><span class="sxs-lookup"><span data-stu-id="1a412-397">Expression</span></span>   | <span data-ttu-id="1a412-398">Stringa</span><span class="sxs-lookup"><span data-stu-id="1a412-398">String</span></span>    | <span data-ttu-id="1a412-399">Corrispondenza con</span><span class="sxs-lookup"><span data-stu-id="1a412-399">Match</span></span> | <span data-ttu-id="1a412-400">Commento</span><span class="sxs-lookup"><span data-stu-id="1a412-400">Comment</span></span>               |
| ------------ | --------- |  ---- |  -------------------- |
| `[a-z]{2}`   | <span data-ttu-id="1a412-401">hello</span><span class="sxs-lookup"><span data-stu-id="1a412-401">hello</span></span>     | <span data-ttu-id="1a412-402">Yes</span><span class="sxs-lookup"><span data-stu-id="1a412-402">Yes</span></span>   | <span data-ttu-id="1a412-403">Corrispondenze di sottostringhe</span><span class="sxs-lookup"><span data-stu-id="1a412-403">Substring matches</span></span>     |
| `[a-z]{2}`   | <span data-ttu-id="1a412-404">123abc456</span><span class="sxs-lookup"><span data-stu-id="1a412-404">123abc456</span></span> | <span data-ttu-id="1a412-405">Yes</span><span class="sxs-lookup"><span data-stu-id="1a412-405">Yes</span></span>   | <span data-ttu-id="1a412-406">Corrispondenze di sottostringhe</span><span class="sxs-lookup"><span data-stu-id="1a412-406">Substring matches</span></span>     |
| `[a-z]{2}`   | <span data-ttu-id="1a412-407">mz</span><span class="sxs-lookup"><span data-stu-id="1a412-407">mz</span></span>        | <span data-ttu-id="1a412-408">Yes</span><span class="sxs-lookup"><span data-stu-id="1a412-408">Yes</span></span>   | <span data-ttu-id="1a412-409">Corrisponde all'espressione</span><span class="sxs-lookup"><span data-stu-id="1a412-409">Matches expression</span></span>    |
| `[a-z]{2}`   | <span data-ttu-id="1a412-410">MZ</span><span class="sxs-lookup"><span data-stu-id="1a412-410">MZ</span></span>        | <span data-ttu-id="1a412-411">Yes</span><span class="sxs-lookup"><span data-stu-id="1a412-411">Yes</span></span>   | <span data-ttu-id="1a412-412">Senza distinzione maiuscole/minuscole</span><span class="sxs-lookup"><span data-stu-id="1a412-412">Not case sensitive</span></span>    |
| `^[a-z]{2}$` |  <span data-ttu-id="1a412-413">hello</span><span class="sxs-lookup"><span data-stu-id="1a412-413">hello</span></span>    | <span data-ttu-id="1a412-414">No</span><span class="sxs-lookup"><span data-stu-id="1a412-414">No</span></span>    | <span data-ttu-id="1a412-415">Vedere `^` e `$` sopra</span><span class="sxs-lookup"><span data-stu-id="1a412-415">See `^` and `$` above</span></span> |
| `^[a-z]{2}$` | <span data-ttu-id="1a412-416">123abc456</span><span class="sxs-lookup"><span data-stu-id="1a412-416">123abc456</span></span> | <span data-ttu-id="1a412-417">No</span><span class="sxs-lookup"><span data-stu-id="1a412-417">No</span></span>    | <span data-ttu-id="1a412-418">Vedere `^` e `$` sopra</span><span class="sxs-lookup"><span data-stu-id="1a412-418">See `^` and `$` above</span></span> |

<span data-ttu-id="1a412-419">Per altre informazioni sulla sintassi delle espressioni regolari, vedere [Espressioni regolari di .NET Framework](/dotnet/standard/base-types/regular-expression-language-quick-reference).</span><span class="sxs-lookup"><span data-stu-id="1a412-419">For more information on regular expression syntax, see [.NET Framework Regular Expressions](/dotnet/standard/base-types/regular-expression-language-quick-reference).</span></span>

<span data-ttu-id="1a412-420">Per limitare un parametro a un set noto di valori possibili, usare un'espressione regolare.</span><span class="sxs-lookup"><span data-stu-id="1a412-420">To constrain a parameter to a known set of possible values, use a regular expression.</span></span> <span data-ttu-id="1a412-421">Ad esempio, `{action:regex(^(list|get|create)$)}` verifica la corrispondenza del valore di route `action` solo con `list`, `get` o `create`.</span><span class="sxs-lookup"><span data-stu-id="1a412-421">For example, `{action:regex(^(list|get|create)$)}` only matches the `action` route value to `list`, `get`, or `create`.</span></span> <span data-ttu-id="1a412-422">Se viene passata nel dizionario di vincoli, la stringa `^(list|get|create)$` è equivalente.</span><span class="sxs-lookup"><span data-stu-id="1a412-422">If passed into the constraints dictionary, the string `^(list|get|create)$` is equivalent.</span></span> <span data-ttu-id="1a412-423">Anche i vincoli passati nel dizionario di vincoli (non inline all'interno di un modello) che non corrispondono a uno dei vincoli noti vengono considerati espressioni regolari.</span><span class="sxs-lookup"><span data-stu-id="1a412-423">Constraints that are passed in the constraints dictionary (not inline within a template) that don't match one of the known constraints are also treated as regular expressions.</span></span>

::: moniker range=">= aspnetcore-2.2"

## <a name="parameter-transformer-reference"></a><span data-ttu-id="1a412-424">Riferimento ai trasformatori di parametro</span><span class="sxs-lookup"><span data-stu-id="1a412-424">Parameter transformer reference</span></span>

<span data-ttu-id="1a412-425">I trasformatori di parametro:</span><span class="sxs-lookup"><span data-stu-id="1a412-425">Parameter transformers:</span></span>

* <span data-ttu-id="1a412-426">Vengono eseguiti quando si genera un collegamento per `Route`.</span><span class="sxs-lookup"><span data-stu-id="1a412-426">Execute when generating a link for a `Route`.</span></span>
* <span data-ttu-id="1a412-427">Implementare `Microsoft.AspNetCore.Routing.IOutboundParameterTransformer`.</span><span class="sxs-lookup"><span data-stu-id="1a412-427">Implement `Microsoft.AspNetCore.Routing.IOutboundParameterTransformer`.</span></span>
* <span data-ttu-id="1a412-428">Vengono configurati tramite <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap>.</span><span class="sxs-lookup"><span data-stu-id="1a412-428">Are configured using <xref:Microsoft.AspNetCore.Routing.RouteOptions.ConstraintMap>.</span></span>
* <span data-ttu-id="1a412-429">Acquisire il valore della route del parametro e trasformarlo in un nuovo valore stringa.</span><span class="sxs-lookup"><span data-stu-id="1a412-429">Take the parameter's route value and transform it to a new string value.</span></span>
* <span data-ttu-id="1a412-430">Il valore trasformato viene usato nel collegamento generato.</span><span class="sxs-lookup"><span data-stu-id="1a412-430">The transformed value is used in the generated link.</span></span>

<span data-ttu-id="1a412-431">Ad esempio, un trasformatore di parametro `slugify` personalizzato nel modello di route `blog\{article:slugify}` con `Url.Action(new { article = "MyTestArticle" })` genera `blog\my-test-article`.</span><span class="sxs-lookup"><span data-stu-id="1a412-431">For example, a custom `slugify` parameter transformer in route pattern `blog\{article:slugify}` with `Url.Action(new { article = "MyTestArticle" })` generates `blog\my-test-article`.</span></span>

<span data-ttu-id="1a412-432">I trasformatori di parametro sono usati anche dai framework per trasformare l'URI in cui viene risolto un endpoint.</span><span class="sxs-lookup"><span data-stu-id="1a412-432">Parameter transformers are also used by frameworks to transform the URI to which an endpoint resolves.</span></span> <span data-ttu-id="1a412-433">Ad esempio, ASP.NET Core MVC usa i trasformatori di parametro per trasformare il valore di route usato per abbinare `area`, `controller`, `action` e `page`.</span><span class="sxs-lookup"><span data-stu-id="1a412-433">For example, ASP.NET Core MVC uses parameter transformers to transform the route value used to match an `area`, `controller`, `action`, and `page`.</span></span>

```csharp
routes.MapRoute(
    name: "default",
    template: "{controller=Home:slugify}/{action=Index:slugify}/{id?}");
```

<span data-ttu-id="1a412-434">Con la route precedente, l'azione `SubscriptionManagementController.GetAll()` viene abbinata all'URI `/subscription-management/get-all`.</span><span class="sxs-lookup"><span data-stu-id="1a412-434">With the preceding route, the action `SubscriptionManagementController.GetAll()` is matched with the URI `/subscription-management/get-all`.</span></span> <span data-ttu-id="1a412-435">Un trasformatore di parametro non modifica i valori della route usati per generare un collegamento.</span><span class="sxs-lookup"><span data-stu-id="1a412-435">A parameter transformer doesn't change the route values used to generate a link.</span></span> <span data-ttu-id="1a412-436">`Url.Action("GetAll", "SubscriptionManagement")` genera `/subscription-management/get-all`.</span><span class="sxs-lookup"><span data-stu-id="1a412-436">`Url.Action("GetAll", "SubscriptionManagement")` outputs `/subscription-management/get-all`.</span></span>

<span data-ttu-id="1a412-437">ASP.NET Core offre convenzioni API per l'uso di trasformatori di parametro con le route generate:</span><span class="sxs-lookup"><span data-stu-id="1a412-437">ASP.NET Core provides API conventions for using a parameter transformers with generated routes:</span></span>

* <span data-ttu-id="1a412-438">ASP.NET Core MVC include la convenzione API `Microsoft.AspNetCore.Mvc.ApplicationModels.RouteTokenTransformerConvention`.</span><span class="sxs-lookup"><span data-stu-id="1a412-438">ASP.NET Core MVC has the `Microsoft.AspNetCore.Mvc.ApplicationModels.RouteTokenTransformerConvention` API convention.</span></span> <span data-ttu-id="1a412-439">Questa convenzione applica un trasformatore di parametro specifico a tutte le route di attributi nell'app.</span><span class="sxs-lookup"><span data-stu-id="1a412-439">This convention applies a specified parameter transformer to all attribute routes in the app.</span></span> <span data-ttu-id="1a412-440">Il trasformatore di parametro trasforma i token di route di attributi man mano che vengono sostituiti.</span><span class="sxs-lookup"><span data-stu-id="1a412-440">The parameter transformer transforms attribute route tokens as they are replaced.</span></span> <span data-ttu-id="1a412-441">Per altre informazioni vedere [Use a parameter transformer to customize token replacement](/aspnet/core/mvc/controllers/routing#use-a-parameter-transformer-to-customize-token-replacement) (Usare un trasformatore di parametro per personalizzare la sostituzione di token).</span><span class="sxs-lookup"><span data-stu-id="1a412-441">For more information, see [Use a parameter transformer to customize token replacement](/aspnet/core/mvc/controllers/routing#use-a-parameter-transformer-to-customize-token-replacement).</span></span>
* <span data-ttu-id="1a412-442">Razor Pages include la convenzione API `Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteTransformerConvention`.</span><span class="sxs-lookup"><span data-stu-id="1a412-442">Razor pages has the `Microsoft.AspNetCore.Mvc.ApplicationModels.PageRouteTransformerConvention` API convention.</span></span> <span data-ttu-id="1a412-443">Questa convenzione applica un trasformatore di parametro specifico a tutte le pagine Razor individuate automaticamente.</span><span class="sxs-lookup"><span data-stu-id="1a412-443">This convention applies a specified parameter transformer to all automatically discovered Razor pages.</span></span> <span data-ttu-id="1a412-444">Il trasformatore di parametro trasforma i segmenti di cartella e nome file delle route di pagine Razor.</span><span class="sxs-lookup"><span data-stu-id="1a412-444">The parameter transformer transforms the folder and file name segments of Razor page routes.</span></span> <span data-ttu-id="1a412-445">Per altre informazioni, vedere [Use a parameter transformer to customize page routes](/aspnet/core/razor-pages/razor-pages-conventions#use-a-parameter-transformer-to-customize-page-routes) (Usare un trasformatore di parametro per personalizzare route di pagine).</span><span class="sxs-lookup"><span data-stu-id="1a412-445">For more information, see [Use a parameter transformer to customize page routes](/aspnet/core/razor-pages/razor-pages-conventions#use-a-parameter-transformer-to-customize-page-routes).</span></span>

::: moniker-end

## <a name="url-generation-reference"></a><span data-ttu-id="1a412-446">Riferimento per la generazione di URL</span><span class="sxs-lookup"><span data-stu-id="1a412-446">URL generation reference</span></span>

<span data-ttu-id="1a412-447">L'esempio seguente mostra come generare un collegamento a una route usando un dizionario di valori di route e un elemento <xref:Microsoft.AspNetCore.Routing.RouteCollection>.</span><span class="sxs-lookup"><span data-stu-id="1a412-447">The following example shows how to generate a link to a route given a dictionary of route values and a <xref:Microsoft.AspNetCore.Routing.RouteCollection>.</span></span>

::: moniker range=">= aspnetcore-2.0"

[!code-csharp[](routing/samples/2.x/RoutingSample/Startup.cs?name=snippet_Dictionary)]

::: moniker-end

::: moniker range="< aspnetcore-2.0"

[!code-csharp[](routing/samples/1.x/RoutingSample/Startup.cs?name=snippet_Dictionary)]

::: moniker-end

<span data-ttu-id="1a412-448">L'elemento `VirtualPath` generato alla fine dell'esempio precedente è `/package/create/123`.</span><span class="sxs-lookup"><span data-stu-id="1a412-448">The `VirtualPath` generated at the end of the preceding sample is `/package/create/123`.</span></span> <span data-ttu-id="1a412-449">Il dizionario fornisce i valori di route `operation` e `id` del modello "Track Package Route", `package/{operation}/{id}`.</span><span class="sxs-lookup"><span data-stu-id="1a412-449">The dictionary supplies the `operation` and `id` route values of the "Track Package Route" template, `package/{operation}/{id}`.</span></span> <span data-ttu-id="1a412-450">Per informazioni dettagliate, vedere il codice di esempio nella sezione [Usare il middleware di routing](#use-routing-middleware) oppure l'[app di esempio](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/samples).</span><span class="sxs-lookup"><span data-stu-id="1a412-450">For details, see the sample code in the [Use Routing Middleware](#use-routing-middleware) section or the [sample app](https://github.com/aspnet/Docs/tree/master/aspnetcore/fundamentals/routing/samples).</span></span>

<span data-ttu-id="1a412-451">Il secondo parametro per il costruttore `VirtualPathContext` è una raccolta di *valori di ambiente*.</span><span class="sxs-lookup"><span data-stu-id="1a412-451">The second parameter to the `VirtualPathContext` constructor is a collection of *ambient values*.</span></span> <span data-ttu-id="1a412-452">I valori di ambiente sono utili poiché limitano il numero di valori che uno sviluppatore deve specificare all'interno di un determinato contesto di richiesta.</span><span class="sxs-lookup"><span data-stu-id="1a412-452">Ambient values provide convenience by limiting the number of values a developer must specify within a certain request context.</span></span> <span data-ttu-id="1a412-453">I valori di route correnti della richiesta corrente sono considerati valori di ambiente per la generazione del collegamento.</span><span class="sxs-lookup"><span data-stu-id="1a412-453">The current route values of the current request are considered ambient values for link generation.</span></span> <span data-ttu-id="1a412-454">Se in un'app ASP.NET Core MVC si è nell'azione `About` di `HomeController`, non è necessario specificare il valore di route del controller per collegarsi all'azione `Index` &mdash; verrà usato il valore di ambiente di `Home`.</span><span class="sxs-lookup"><span data-stu-id="1a412-454">In an ASP.NET Core MVC app if you are in the `About` action of the `HomeController`, you don't need to specify the controller route value to link to the `Index` action&mdash;the ambient value of `Home` is used.</span></span>

<span data-ttu-id="1a412-455">I valori di ambiente vengono ignorati se non corrispondono a un parametro e quando vengono sostituiti da valori specificati in modo esplicito, procedendo da sinistra verso destra nell'URL.</span><span class="sxs-lookup"><span data-stu-id="1a412-455">Ambient values that don't match a parameter are ignored, and ambient values are also ignored when an explicitly provided value overrides it, going from left to right in the URL.</span></span>

<span data-ttu-id="1a412-456">I valori specificati in modo esplicito ma che non corrispondono ad alcun elemento vengono aggiunti alla stringa di query.</span><span class="sxs-lookup"><span data-stu-id="1a412-456">Values that are explicitly provided but which don't match anything are added to the query string.</span></span> <span data-ttu-id="1a412-457">La tabella seguente illustra il risultato ottenuto quando si usa il modello di route `{controller}/{action}/{id?}`.</span><span class="sxs-lookup"><span data-stu-id="1a412-457">The following table shows the result when using the route template `{controller}/{action}/{id?}`.</span></span>

| <span data-ttu-id="1a412-458">Valori di ambiente</span><span class="sxs-lookup"><span data-stu-id="1a412-458">Ambient Values</span></span>                | <span data-ttu-id="1a412-459">Valori espliciti</span><span class="sxs-lookup"><span data-stu-id="1a412-459">Explicit Values</span></span>                   | <span data-ttu-id="1a412-460">Risultato</span><span class="sxs-lookup"><span data-stu-id="1a412-460">Result</span></span>                  |
| ----------------------------- | --------------------------------- | ----------------------- |
| <span data-ttu-id="1a412-461">controller="Home"</span><span class="sxs-lookup"><span data-stu-id="1a412-461">controller="Home"</span></span>             | <span data-ttu-id="1a412-462">action="About"</span><span class="sxs-lookup"><span data-stu-id="1a412-462">action="About"</span></span>                    | `/Home/About`           |
| <span data-ttu-id="1a412-463">controller="Home"</span><span class="sxs-lookup"><span data-stu-id="1a412-463">controller="Home"</span></span>             | <span data-ttu-id="1a412-464">controller="Order",action="About"</span><span class="sxs-lookup"><span data-stu-id="1a412-464">controller="Order",action="About"</span></span> | `/Order/About`          |
| <span data-ttu-id="1a412-465">controller="Home",color="Red"</span><span class="sxs-lookup"><span data-stu-id="1a412-465">controller="Home",color="Red"</span></span> | <span data-ttu-id="1a412-466">action="About"</span><span class="sxs-lookup"><span data-stu-id="1a412-466">action="About"</span></span>                    | `/Home/About`           |
| <span data-ttu-id="1a412-467">controller="Home"</span><span class="sxs-lookup"><span data-stu-id="1a412-467">controller="Home"</span></span>             | <span data-ttu-id="1a412-468">action="About",color="Red"</span><span class="sxs-lookup"><span data-stu-id="1a412-468">action="About",color="Red"</span></span>        | `/Home/About?color=Red` |

<span data-ttu-id="1a412-469">Se una route ha un valore predefinito che non corrisponde a un parametro e tale valore viene specificato in modo esplicito, deve corrispondere al valore predefinito:</span><span class="sxs-lookup"><span data-stu-id="1a412-469">If a route has a default value that doesn't correspond to a parameter and that value is explicitly provided, it must match the default value:</span></span>

```csharp
routes.MapRoute("blog_route", "blog/{*slug}",
    defaults: new { controller = "Blog", action = "ReadPost" });
```

<span data-ttu-id="1a412-470">La funzionalità di generazione del collegamento genera un collegamento per questa route solo se vengono specificati i valori corrispondenti per il controller e l'azione.</span><span class="sxs-lookup"><span data-stu-id="1a412-470">Link generation only generates a link for this route when the matching values for controller and action are provided.</span></span>
